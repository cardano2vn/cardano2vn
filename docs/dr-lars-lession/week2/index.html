<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Cardano2vn Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Cardano2vn Blog Atom Feed"><title data-react-helmet="true">Week 02 - Validation | Cardano2vn</title><meta data-react-helmet="true" property="og:url" content="https://cardano2vn.io/docs/dr-lars-lession/week2"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Week 02 - Validation | Cardano2vn"><meta data-react-helmet="true" name="description" content="ƒê√¢y l√† t√†i li·ªáu B√†i gi·∫£ng \#2, Dr. Lars."><meta data-react-helmet="true" property="og:description" content="ƒê√¢y l√† t√†i li·ªáu B√†i gi·∫£ng \#2, Dr. Lars."><link data-react-helmet="true" rel="shortcut icon" href="/img/2.png"><link data-react-helmet="true" rel="canonical" href="https://cardano2vn.io/docs/dr-lars-lession/week2"><link data-react-helmet="true" rel="alternate" href="https://cardano2vn.io/docs/dr-lars-lession/week2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://cardano2vn.io/docs/dr-lars-lession/week2" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8b54419c.css">
<link rel="preload" href="/assets/js/runtime~main.00983322.js" as="script">
<link rel="preload" href="/assets/js/main.349a1baa.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/2.png" alt="Cardano2vn Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/2.png" alt="Cardano2vn Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Cardano2vn</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started/overview">B·∫Øt ƒë·∫ßu</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/cardano2vn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/2.png" alt="Cardano2vn Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/2.png" alt="Cardano2vn Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Cardano2vn</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/getting-started/overview">B·∫Øt ƒë·∫ßu</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/cardano2vn" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started/overview">T·ªïng quan</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">T·∫°o H·ª£p ƒë·ªìng th√¥ng minh</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/smart-contracts/overview">T·ªïng quan</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/smart-contracts/marlowe">Marlowe</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/smart-contracts/plutus">Plutus</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">T√≠ch h·ª£p v·ªõi Cardano</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrate-cardano/overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrate-cardano/creating-wallet-faucet">Tao Wallet Faucet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrate-cardano/multi-witness-transactions-cli">Multi witness transaction cli</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrate-cardano/listening-for-payments-cli">Listening for payment cli</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrate-cardano/listening-for-payments-wallet">Listening for payment wallets</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/integrate-cardano/testnet-faucet">Testnet faucet</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">V·∫≠n h√†nh m·ªôt Stake Pool</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/operate-a-stake-pool/overview">T·ªïng quan</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Kho√° ƒë√†o t·∫°o Plutus c·ªßa Dr. Lars</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dr-lars-lession/overview">Plutus Pioneer Program</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dr-lars-lession/week1">Week 01 - English Auction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/dr-lars-lession/week2">Week 02 - Validation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dr-lars-lession/week3">Week 03 - Script Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/dr-lars-lession/week4">Week 04 - Monads</a></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Week 02 - Validation</h1></header><div class="markdown"><p>ƒê√¢y l√† t√†i li·ªáu <a href="https://youtu.be/7nDGZkUIeUQ" target="_blank" rel="noopener noreferrer">B√†i gi·∫£ng #2, Dr. Lars</a>.</p><p>N√≥ bao g·ªìm m·ª©c th·∫•p v√† m·ª©c cao t·∫≠p l·ªánh x√°c th·ª±c on-chain.</p><blockquote><p>M√£ trong b√†i gi·∫£ng n√†y s·ª≠ d·ª•ng cam k·∫øt Plutus
81ba78edb1d634a13371397d8c8b19829345ce0d
:::</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="tr∆∞·ªõc-khi-b·∫Øt-ƒë·∫ßu"></a>Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu<a class="hash-link" href="#tr∆∞·ªõc-khi-b·∫Øt-ƒë·∫ßu" title="Direct link to heading">#</a></h2><p>H√£y n√≥i v·ªÅ m·ªôt ƒëi·ªÉm quan tr·ªçng ƒë∆∞·ª£c ƒë∆∞a ra b·ªüi m·ªôt trong nh·ªØng ng∆∞·ªùi
ti√™n phong sau b√†i gi·∫£ng s·ªë 1.</p><p>B·∫°n s·∫Ω g·ªçi l·∫°i trong v√≠ d·ª• ƒë·∫•u gi√°, ch√∫ng t√¥i t·∫°o ra ba endpoints -
<code>start</code>, <code>bid</code> v√† <code>close</code>. <code>close</code> c√≥ hai k·ªãch b·∫£n. N·∫øu c√≥ gi√° th·∫ßu ƒë·ªß
cao, m√£ th√¥ng b√°o s·∫Ω ƒë∆∞·ª£c chuy·ªÉn ƒë·∫øn ng∆∞·ªùi ƒë·∫∑t gi√° th·∫ßu cao nh·∫•t. N·∫øu
kh√¥ng c√≥ gi√° th·∫ßu ƒë·ªß cao, m√£ th√¥ng b√°o s·∫Ω quay tr·ªü l·∫°i ng∆∞·ªùi b√°n.</p><p>ƒêi·ªÅu g√¨ s·∫Ω x·∫£y ra n·∫øu <code>endpoint close</code> kh√¥ng c√≥ ·ªü ƒë√≥? Ti·ªÅn c√≥ th·ªÉ b·ªã
kh√≥a m√£i m√£i trong h·ª£p ƒë·ªìng kh√¥ng?</p><p>ƒê√¢y l√† m·ªôt ƒëi·ªÉm th·ª±c s·ª± quan tr·ªçng, b·ªüi v√¨ nh·ªØng g√¨ b·∫°n ph·∫£i nh·∫≠n ra l√†
UTxO tr√™n blockchain ch·ªâ l√† d·ªØ li·ªáu, ch√∫ng ho√†n to√†n th·ª• ƒë·ªông. ƒê·ªÉ b·∫•t c·ª©
ƒëi·ªÅu g√¨ x·∫£y ra ph·∫£i c√≥ m·ªôt giao d·ªãch. ƒê·ªÉ ƒë·∫°t ƒë∆∞·ª£c ti·∫øn b·ªô v√† thay ƒë·ªïi
tr·∫°ng th√°i c·ªßa blockchain, ph·∫£i c√≥ m·ªôt giao d·ªãch m·ªõi ƒë∆∞·ª£c g·ª≠i s·ª≠ d·ª•ng
c√°c UTxO kh√°c nhau v√† t·∫°o ra c√°c UTxO m·ªõi.</p><p>Ch·ªâ c√≥ c√°c giao d·ªãch m·ªõi thay ƒë·ªïi tr·∫°ng th√°i. UTxO s·∫Ω kh√¥ng bao gi·ªù t·ª±
ho·∫°t ƒë·ªông v√† th·ª±c hi·ªán ƒëi·ªÅu g√¨ ƒë√≥. B·∫°n kh√¥ng th·ªÉ c√≥ m·ªôt h·ª£p ƒë·ªìng th√¥ng
minh n·∫±m tr√™n blockchain v√† v√†o m·ªôt th·ªùi ƒëi·ªÉm n√†o ƒë√≥, ƒë·ªôt nhi√™n th·ª±c
hi·ªán m·ªôt h√†nh ƒë·ªông.</p><p>V√¨ v·∫≠y, ch√∫ng t√¥i th·ª±c s·ª± c·∫ßn <code>endpoint close</code> n·∫øu ch√∫ng t√¥i mu·ªën cu·ªôc
ƒë·∫•u gi√° ƒë∆∞·ª£c gi·∫£i quy·∫øt. Trong tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng t√¥i, ƒëi·ªÉm cu·ªëi ƒë∆∞·ª£c
k√≠ch ho·∫°t theo c√°ch th·ªß c√¥ng. B·∫°n c√≥ th·ªÉ vi·∫øt m·ªôt h·ª£p ƒë·ªìng ch·∫°y trong v√≠
s·∫Ω t·ª± ƒë·ªông t·∫°o closegiao d·ªãch - c√≥ th·ªÉ vi·∫øt m√£ ngo√†i chu·ªói kh√° ph·ª©c t·∫°p.</p><p>Tuy nhi√™n, theo quan ƒëi·ªÉm c·ªßa blockchain, n√≥ lu√¥n l√† m·ªôt y·∫øu t·ªë k√≠ch
ho·∫°t b√™n ngo√†i th·ª±c hi·ªán ƒëi·ªÅu g√¨ ƒë√≥. Kh√¥ng c√≥ g√¨ x·∫£y ra n·∫øu n√≥ kh√¥ng
ƒë∆∞·ª£c k√≠ch ho·∫°t t·ª´ b√™n ngo√†i.</p><p>V√¨ v·∫≠y, n·∫øu kh√¥ng c√≥ <code>endpoint close</code> , ho·∫∑c <code>endpoint close</code> kh√¥ng bao
gi·ªù ƒë∆∞·ª£c k√≠ch ho·∫°t, th√¨ ti·ªÅn s·∫Ω v·∫´n n·∫±m ·ªü ƒë·ªãa ch·ªâ t·∫≠p l·ªánh m√£i m√£i.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="gi·ªõi-thi·ªáu"></a>Gi·ªõi thi·ªáu<a class="hash-link" href="#gi·ªõi-thi·ªáu" title="Direct link to heading">#</a></h2><p>Trong b√†i gi·∫£ng ƒë·∫ßu ti√™n, ch√∫ng ta ƒë√£ th·∫•y r·∫±ng h·ª£p ƒë·ªìng th√¥ng minh c√≥
hai m·∫∑t - m·ªôt ph·∫ßn trong chu·ªói v√† m·ªôt ph·∫ßn ngo√†i chu·ªói.</p><p>Ph·∫ßn on-chain l√† v·ªÅ x√°c nh·∫≠n. N√≥ cho ph√©p c√°c n√∫t x√°c th·ª±c m·ªôt giao d·ªãch
nh·∫•t ƒë·ªãnh v√† li·ªáu n√≥ c√≥ ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng m·ªôt UTxO nh·∫•t ƒë·ªãnh hay kh√¥ng.</p><p>Ph·∫ßn off-chain n·∫±m trong v√≠ c·ªßa ng∆∞·ªùi d√πng. N√≥ x√¢y d·ª±ng v√† g·ª≠i c√°c giao
d·ªãch ph√π h·ª£p.</p><p>C·∫£ hai ƒë·ªÅu l√† ch·ªß ƒë·ªÅ quan tr·ªçng. Ch√∫ng t√¥i ph·∫£i th√†nh th·∫°o c·∫£ hai ƒë·ªÉ
vi·∫øt h·ª£p ƒë·ªìng th√¥ng minh, nh∆∞ng hi·ªán t·∫°i ch√∫ng t√¥i s·∫Ω t·∫≠p trung v√†o ph·∫ßn
on-chain.</p><p>H√£y nh·ªõ l·∫°i m√¥ h√¨nh UTxO m·ªü r·ªông m√† √Ω t∆∞·ªüng l√† ch√∫ng t√¥i gi·ªõi thi·ªáu m·ªôt
lo·∫°i ƒë·ªãa ch·ªâ m·ªõi.</p><p><img src="/assets/images/1-5f05ed3c68345659a94e4ed6f7502471.png"></p><p>Trong m√¥ h√¨nh UTxO ƒë∆°n gi·∫£n, c√°i g·ªçi l√† ƒë·ªãa ch·ªâ kh√≥a c√¥ng khai, trong ƒë√≥
ƒë·ªãa ch·ªâ ƒë∆∞·ª£c cung c·∫•p b·ªüi h√†m bƒÉm c·ªßa kh√≥a c√¥ng khai. N·∫øu m·ªôt UTxO n·∫±m ·ªü
ƒë·ªãa ch·ªâ kh√≥a c√¥ng khai nh∆∞ v·∫≠y, th√¨ m·ªôt giao d·ªãch c√≥ th·ªÉ s·ª≠ d·ª•ng UTxO ƒë√≥
l√†m ƒë·∫ßu v√†o n·∫øu ch·ªØ k√Ω thu·ªôc kh√≥a c√¥ng khai ƒë√≥ ƒë∆∞·ª£c bao g·ªìm trong giao
d·ªãch.</p><p>Nh·ªØng g√¨ m√¥ h√¨nh (E) UTxO l√†m l√† m·ªü r·ªông ƒëi·ªÅu n√†y b·∫±ng c√°ch th√™m c√°c ƒë·ªãa
ch·ªâ t·∫≠p l·ªánh c√≥ th·ªÉ ch·∫°y logic t√πy √Ω.</p><p>Khi m·ªôt giao d·ªãch mu·ªën s·ª≠ d·ª•ng UTxO ·ªü m·ªôt ƒë·ªãa ch·ªâ t·∫≠p l·ªánh ƒë∆∞·ª£c x√°c th·ª±c
b·ªüi m·ªôt n√∫t, th√¨ n√∫t ƒë√≥ s·∫Ω ch·∫°y t·∫≠p l·ªánh v√† sau ƒë√≥, t√πy thu·ªôc v√†o k·∫øt
qu·∫£ c·ªßa t·∫≠p l·ªánh, quy·∫øt ƒë·ªãnh xem giao d·ªãch c√≥ h·ª£p l·ªá hay kh√¥ng.</p><p>V√† nh·ªõ l·∫°i r·∫±ng hai l√† ba b·ªï sung n·ªØa:</p><p>Thay v√¨ ch·ªâ c√≥ ch·ªØ k√Ω tr√™n c√°c giao d·ªãch, ch√∫ng t√¥i c√≥ c√°i g·ªçi l√† Ng∆∞·ªùi
nh·∫≠n th·ª´a - c√°c ph·∫ßn d·ªØ li·ªáu t√πy √Ω. ·ªû ph√≠a ƒë·∫ßu ra UTxO, ch√∫ng t√¥i c√≥ m·ªôt
ph·∫ßn d·ªØ li·ªáu t√πy √Ω b·ªï sung ƒë∆∞·ª£c g·ªçi l√† Datum, b·∫°n c√≥ th·ªÉ coi ƒë√¢y l√† m·ªôt
ph·∫ßn nh·ªè c·ªßa tr·∫°ng th√°i n·∫±m tr√™n UTxO. Cu·ªëi c√πng, ch√∫ng ta c√≥ b·ªëi c·∫£nh.
C√≥ nhi·ªÅu l·ª±a ch·ªçn kh√°c nhau v·ªÅ b·ªëi c·∫£nh n√†y c√≥ th·ªÉ l√† g√¨. N√≥ c√≥ th·ªÉ r·∫•t
h·∫°n ch·∫ø, ch·ªâ bao g·ªìm Ch√∫a c·ª©u th·∫ø (nh∆∞ trong Bitcoin) ho·∫∑c r·∫•t to√†n c·∫ßu,
bao g·ªìm to√†n b·ªô tr·∫°ng th√°i c·ªßa blockchain (nh∆∞ trong Etheum). Trong
Cardano, ƒë√≥ l√† giao d·ªãch ƒëang ƒë∆∞·ª£c x√°c th·ª±c, bao g·ªìm t·∫•t c·∫£ c√°c ƒë·∫ßu v√†o
v√† ƒë·∫ßu ra c·ªßa n√≥.</p><p>V√¨ v·∫≠y, c√≥ ba ph·∫ßn d·ªØ li·ªáu m√† m·ªôt t·∫≠p l·ªánh Plutus nh·∫≠n ƒë∆∞·ª£c. Datum, ƒë·∫∑t
t·∫°i UTxO, ng∆∞·ªùi mua l·∫°i, ƒë·∫øn t·ª´ ƒë·∫ßu v√†o v√† x√°c th·ª±c, v√† ng·ªØ c·∫£nh, bao
g·ªìm giao d·ªãch ƒëang ƒë∆∞·ª£c x√°c th·ª±c v√† c√°c ƒë·∫ßu v√†o v√† ƒë·∫ßu ra c·ªßa n√≥.</p><p>Trong m·ªôt tri·ªÉn khai c·ª• th·ªÉ nh∆∞ Plutus, nh·ªØng ph·∫ßn th√¥ng tin n√†y c·∫ßn
ƒë∆∞·ª£c bi·ªÉu di·ªÖn b·∫±ng m·ªôt ki·ªÉu d·ªØ li·ªáu c·ª• th·ªÉ - ki·ªÉu d·ªØ li·ªáu Haskell. Khi
n√≥ x·∫£y ra, l·ª±a ch·ªçn ƒë√£ ƒë∆∞·ª£c th·ª±c hi·ªán ƒë·ªÉ s·ª≠ d·ª•ng c√πng m·ªôt ki·ªÉu d·ªØ li·ªáu
cho c·∫£ ba ng∆∞·ªùi trong s·ªë h·ªç. √çt nh·∫•t l√† ·ªü m·ª©c ƒë·ªô th·ª±c hi·ªán th·∫•p.</p><p>Ch√∫ng ta s·∫Ω xem x√©t ƒëi·ªÅu ƒë√≥ ƒë·∫ßu ti√™n, nh∆∞ng trong cu·ªôc s·ªëng th·ª±c kh√¥ng
ai th·ª±c s·ª± s·ª≠ d·ª•ng ph∆∞∆°ng ph√°p ti·∫øp c·∫≠n c·∫•p th·∫•p n√†y. C√≥ nhi·ªÅu c√°ch
thu·∫≠n ti·ªán h∆°n ƒë·ªÉ s·ª≠ d·ª•ng c√°c ki·ªÉu d·ªØ li·ªáu ph√π h·ª£p h∆°n cho nh·ªØng vi·ªác
n√†y, v√† ch√∫ng ta s·∫Ω ƒë·ªÅ c·∫≠p ƒë·∫øn v·∫•n ƒë·ªÅ ƒë√≥ ·ªü ph·∫ßn sau c·ªßa b√†i gi·∫£ng n√†y.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="plutustxdata"></a>PlutusTx.Data<a class="hash-link" href="#plutustxdata" title="Direct link to heading">#</a></h2><p>Nh∆∞ ƒë·ªÅ c·∫≠p, the datum, redeemer and context chia s·∫ª m·ªôt ki·ªÉu d·ªØ li·ªáu.</p><p>Ki·ªÉu d·ªØ li·ªáu ƒë√≥ ƒë∆∞·ª£c ƒë·ªëng g√≥i trong <code>plutus-core</code>, trong m√¥-ƒëul
<code>PlutusCore.Data</code>.</p><p>N√≥ ƒë·ª±c g·ªçi ƒë∆°n gi·∫£n l√† <code>Data</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">data Data =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">     Constr Integer [Data]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   | Map [(Data, Data)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   | List [Data]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   | I Integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   | B BS.ByteString</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   deriving stock (Show, Eq, Ord, Generic)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   deriving anyclass (NFData)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N√≥ c√≥ 5 h√†m t·∫°o.</p><ul><li><code>Constr</code> l·∫•y m·ªôt S·ªë nguy√™n v√†, m·ªôt c√°ch ƒë·ªá quy, m·ªôt danh s√°ch <code>Data</code></li><li><code>Map</code> l·∫•y m·ªôt danh s√°ch c√°c c·∫∑p <em>Data</em>. B·∫°n c√≥ th·ªÉ coi ƒë√¢y l√† m·ªôt
b·∫£ng tra c·ª©u c√°c c·∫∑p kh√≥a-gi√° tr·ªã trong ƒë√≥ c·∫£ kh√≥a v√† gi√° tr·ªã ƒë·ªÅu
thu·ªôc lo·∫°i <code>Data</code></li><li><code>List</code> l·∫•y m·ªôt danh s√°ch <code>Data</code></li><li><code>I</code> l·∫•y m·ªôt s·ªë nguy√™n duy nh·∫•t</li><li><code>B</code> l·∫•y m·ªôt chu·ªói Byte</li></ul><p>ƒê·ªëi v·ªõi nh·ªØng ng∆∞·ªùi quen thu·ªôc v·ªõi ƒë·ªãnh d·∫°ng JSON, ƒëi·ªÅu n√†y r·∫•t gi·ªëng.
C√°c h√†m t·∫°o kh√¥ng ho√†n to√†n gi·ªëng nhau, nh∆∞ng gi·ªëng nh∆∞ JSON, b·∫°n c√≥ th·ªÉ
bi·ªÉu di·ªÖn s·ªë, chu·ªói, danh s√°ch d·ªØ li·ªáu v√† c√°c c·∫∑p kh√≥a-gi√° tr·ªã. N√≥ c√≥
th·ªÉ ƒë·∫°i di·ªán cho d·ªØ li·ªáu t√πy √Ω, ƒëi·ªÅu n√†y l√†m cho n√≥ r·∫•t ph√π h·ª£p v·ªõi m·ª•c
ƒë√≠ch c·ªßa ch√∫ng t√¥i.</p><p>Ch√∫ng ta c≈©ng c√≥ th·ªÉ kh√°m ph√° lo·∫°i n√†y trong REPL.</p><p>Ch·∫°y ph·∫ßn sau t·ª´ kho l∆∞u tr·ªØ ch∆∞∆°ng tr√¨nh ti√™n phong c·ªßa plutus. B·∫°n c√≥
th·ªÉ c·∫ßn kh·ªüi ƒë·ªông nix-shell t·ª´ kho l∆∞u tr·ªØ Plutus tr∆∞·ªõc khi thay ƒë·ªïi v√†o
th∆∞ m·ª•c <code>week02</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">cd code/week02</span></div><div class="token-line" style="color:#393A34"><span class="token plain">cabal repl</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>T·ª´ REPL, ch√∫ng ta c·∫ßn import <code>PlutusTx</code> ƒë·ªÉ ch√∫ng c√≥ quy·ªÅn truy c·∫≠p
v√†o<code>Data</code> . <code>Data</code> kh√¥ng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong <code>PlutusTx</code>, nh∆∞ng n√≥ ƒë∆∞·ª£c
t√°i xu·∫•t t·ª´ ƒë√≥.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">import PlutusTx</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ch√∫ng ta c√≥ th·ªÉ th·∫•y th√¥ng tin v·ªÅ <code>Data</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">:i Data</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒêi·ªÅu n√†y chung ta c√≥ th·ªÉ nh·∫≠n ƒë∆∞·ª£c m·ªôt s·ªë th√¥ng tin v·ªÅ <em>Data</em>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude Week02.Burn&gt; import PlutusTx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Week02.Burn&gt; :i Data</span></div><div class="token-line" style="color:#393A34"><span class="token plain">type Data :: *</span></div><div class="token-line" style="color:#393A34"><span class="token plain">data Data</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  = Constr Integer [Data]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  | Map [(Data, Data)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  | List [Data]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  | I Integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  | B bytestring-0.10.12.0:Data.ByteString.Internal.ByteString</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        -- Defined in ‚Äòplutus-core-0.1.0.0:PlutusCore.Data‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Eq Data</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-core-0.1.0.0:PlutusCore.Data‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Ord Data</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-core-0.1.0.0:PlutusCore.Data‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Show Data</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-core-0.1.0.0:PlutusCore.Data‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance IsData Data -- Defined in ‚ÄòPlutusTx.IsData.Class‚Äô</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>B√¢y gi·ªù ch√∫ng ta c√≥ th·ªÉ ch∆°i v·ªõi n√≥. Ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng h√†m <code>I</code> t·∫°o
ƒë·ªÉ t·∫°o m·ªôt gi√° tr·ªã c·ªßa ki·ªÉu <code>Data</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx.Data Week02.Burn&gt; I 42</span></div><div class="token-line" style="color:#393A34"><span class="token plain">I 42</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng ta c√≥ th·ªÉ h·ªèi lo·∫°i c·ªßa n√≥ v√† x√°c nh·∫≠n r·∫±ng n√≥ th·ª±c s·ª± thu·ªôc lo·∫°i
<code>Data</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx.Data Week02.Burn&gt; :t I 42</span></div><div class="token-line" style="color:#393A34"><span class="token plain">I 42 :: Data</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>TC√°ch d·ªÖ nh·∫•t ƒë·ªÉ t·∫°o m·ªôt gi√° tr·ªã ki·ªÉu <code>Data</code> b·∫±ng c√°ch s·ª≠ d·ª•ng h√†m <code>B</code>
t·∫°o l√† s·ª≠ d·ª•ng Ph·∫ßn m·ªü r·ªông GHC <code>OverloadedStrings</code>. ƒêi·ªÅu n√†y cho ph√©p
c√°c chu·ªói k√Ω t·ª± ƒë∆∞·ª£c s·ª≠ d·ª•ng thay cho c√°c ki·ªÉu d·ªØ li·ªáu gi·ªëng chu·ªói v√†
tr√¨nh bi√™n d·ªãch s·∫Ω di·ªÖn gi·∫£i ch√∫ng nh∆∞ ki·ªÉu d·ª± ƒë·ªãnh c·ªßa ch√∫ng.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx.Data Week02.Burn&gt; :set -XOverloadedStrings</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx.Data Week02.Burn&gt; :t B &quot;Haskell&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">B &quot;Haskell&quot; :: Data</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng ta c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c h√†m t·∫°o ph·ª©c t·∫°p h∆°n, nh∆∞ <code>Map</code> and
<code>List</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx.Data Week02.Burn&gt; :t Map [(I 42, B &quot;Haskell&quot;), (List [I 0], I 1000)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Map [(I 42, B &quot;Haskell&quot;), (List [I 0], I 1000)] :: Data</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="plutus-validator"></a>Plutus Validator<a class="hash-link" href="#plutus-validator" title="Direct link to heading">#</a></h2><p>B√¢y gi·ªù ch√∫ng t√¥i ƒë√£ s·∫µn s√†ng tri·ªÉn khai tr√¨nh x√°c th·ª±c ƒë·∫ßu ti√™n c·ªßa
m√¨nh..</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="v√≠-d·ª•-1---h·ª£p-ƒë·ªìng-gift"></a>V√≠ d·ª• 1 - H·ª£p ƒë·ªìng Gift<a class="hash-link" href="#v√≠-d·ª•-1---h·ª£p-ƒë·ªìng-gift" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="the-code"></a>The Code<a class="hash-link" href="#the-code" title="Direct link to heading">#</a></h4><p>Ch√∫ng t√¥i b·∫Øt ƒë·∫ßu t·∫≠p l·ªánh b·∫±ng c√°ch sao ch√©p, d√°n danh s√°ch c√°c ph·∫ßn m·ªü
r·ªông ng√¥n ng·ªØ GHC, c·ªông v·ªõi m·ªôt s·ªë ph·∫ßn nh·∫≠p ph·ª• thu·ªôc t·ª´ v√≠ d·ª• m√† ch√∫ng
t√¥i ƒë√£ s·ª≠ d·ª•ng trong b√†i gi·∫£ng tr∆∞·ªõc.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# LANGUAGE DataKinds           #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{-# LANGUAGE FlexibleContexts    #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">module Week02.Gift where</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">import           Control.Monad       hiding (fmap)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">import           Data.Map            as Map</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">import           Text.Printf         (printf)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Sau ƒë√≥, ch√∫ng t√¥i vi·∫øt tr√¨nh x√°c nh·∫≠n. Cu·ªëi c√πng, tr√¨nh x√°c th·ª±c s·∫Ω l√†
m·ªôt t·∫≠p l·ªánh, s·ªëng tr√™n blockchain trong Plutus Core, l√† m·ªôt ng√¥n ng·ªØ
c·∫•p th·∫•p h∆°n d·ª±a tr√™n ph√©p t√≠nh lambda. Nh∆∞ng, ch√∫ng ta kh√¥ng c·∫ßn ph·∫£i
vi·∫øt Plutus Core. Ch√∫ng ta c√≥ th·ªÉ vi·∫øt Haskell v√† sau n√†y ch√∫ng ta s·∫Ω
xem c√°ch ch√∫ng ta chuy·ªÉn ƒë·ªïi Haskell ƒë√≥ th√†nh t·∫≠p l·ªánh Plutus Core.</p><p>V√¨ v·∫≠y, ch√∫ng t√¥i vi·∫øt m·ªôt h√†m Haskell ƒë·∫°i di·ªán cho tr√¨nh x√°c th·ª±c c·ªßa
ch√∫ng t√¥i. Nh∆∞ ch√∫ng ta ƒë√£ bi·∫øt, tr√¨nh x√°c th·ª±c l√† m·ªôt t·∫≠p l·ªánh c√≥ ba
ph·∫ßn ƒë·∫ßu v√†o - d·ªØ li·ªáu, tr√¨nh ƒë·ªïi v√† ng·ªØ c·∫£nh, t∆∞∆°ng ·ª©ng, ·ªü c·∫•p th·∫•p
nh·∫•t ƒë∆∞·ª£c bi·ªÉu th·ªã b·∫±ng <code>Data</code> ki·ªÉu d·ªØ li·ªáu.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>H∆°i ng·∫°c nhi√™n, k·∫øt qu·∫£ c·ªßa h√†m l√† <code>()</code>. Trong Haskell <code>Unit</code> ki·ªÉu,
t∆∞∆°ng t·ª± nh∆∞ <code>void</code> trong m·ªôt s·ªë ng√¥n ng·ªØ kh√°c, nh∆∞ C ho·∫∑c C # ho·∫∑c
Java - ƒë√≥ l√† ki·ªÉu kh√¥ng mang th√¥ng tin.</p><p><code>Unit</code> l√† m·ªôt ki·ªÉu t√≠ch h·ª£p s·∫µn trong Haskell v√† n√≥ ch·ªâ c√≥ m·ªôt gi√° tr·ªã,
ƒë∆∞·ª£c vi·∫øt theo c√πng m·ªôt c√°ch v·ªõi ch√≠nh ki·ªÉu ƒë√≥, nh∆∞ ch√∫ng ta c√≥ th·ªÉ th·∫•y
t·ª´ REPL.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude Week02.Gift&gt; ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude Week02.Gift&gt; :t ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">() :: ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>M·ªôt h√†m c√≥ ki·ªÉu tr·∫£ v·ªÅ <code>()</code> l√† kh√° b·∫•t th∆∞·ªùng trong Haskell. Trong c√°c
ng√¥n ng·ªØ ch√≠nh th·ªëng h∆°n, vi·ªác c√°c h√†m ho·∫∑c th·ªß t·ª•c kh√¥ng tr·∫£ v·ªÅ gi√° tr·ªã
l√† ƒëi·ªÅu kh√° ph·ªï bi·∫øn. Trong nh·ªØng t√¨nh hu·ªëng n√†y, c√°c h√†m ch·ªâ quan tr·ªçng
ƒë·ªëi v·ªõi c√°c t√°c d·ª•ng ph·ª• c·ªßa ch√∫ng, ch·∫≥ng h·∫°n nh∆∞ h√†m Java in n·ªôi dung
n√†o ƒë√≥ ra b·∫£ng ƒëi·ªÅu khi·ªÉn.</p><p>Nh∆∞ng Haskell l√† m·ªôt ng√¥n ng·ªØ thu·∫ßn t√∫y. N·∫øu b·∫°n mu·ªën c√≥ t√°c d·ª•ng ph·ª•,
ƒëi·ªÅu n√†y s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã b·ªüi h·ªá th·ªëng lo·∫°i. V√≠ d·ª•: n·∫øu mkValidator th·ª±c
hi·ªán b·∫•t k·ª≥ IO n√†o, n√≥ s·∫Ω c√≥ ch·ªØ k√Ω ki·ªÉu:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; IO ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒêi·ªÅu n√†y s·∫Ω ch·ªâ ra m·ªôt h√†m th·ª±c hi·ªán c√°c t√°c d·ª•ng ph·ª• IO nh∆∞ng kh√¥ng c√≥
gi√° tr·ªã tr·∫£ v·ªÅ th√∫ v·ªã.</p><p>Nh∆∞ng, nh∆∞ ch√∫ng ta bi·∫øt r·∫±ng <code>mkValidator</code> h√†m th·ª±c kh√¥ng th·ª±c hi·ªán t√°c
d·ª•ng ph·ª• v√† kh√¥ng tr·∫£ v·ªÅ gi√° tr·ªã n√†o, th·ª±c s·ª± kh√¥ng c√≥ g√¨ h·ªØu √≠ch m√† n√≥
c√≥ th·ªÉ l√†m ƒë∆∞·ª£c.</p><p>Tuy nhi√™n, c√≥ ƒëi·ªÅu g√¨ ƒë√≥ m√† h√†m c√≥ th·ªÉ l√†m c≈©ng nh∆∞ tr·∫£ v·ªÅ <code>()</code>, c·ª• th·ªÉ
l√† n√≥ c√≥ th·ªÉ n√©m ra m·ªôt ngo·∫°i l·ªá ho·∫∑c c√≥ l·ªói. V√† ƒë√≥ l√† nh·ªØng g√¨ Plutus
s·ª≠ d·ª•ng.</p><p>√ù t∆∞·ªüng l√† n·∫øu <code>mkValidatorh√†m</code> kh√¥ng g·∫∑p l·ªói ho·∫∑c ƒë∆∞a ra m·ªôt ngo·∫°i l·ªá,
th√¨ qu√° tr√¨nh x√°c nh·∫≠n s·∫Ω th√†nh c√¥ng. N·∫øu n√≥ xu·∫•t hi·ªán m·ªôt l·ªói th√¨ vi·ªác
x√°c th·ª±c kh√¥ng th√†nh c√¥ng v√† giao d·ªãch b·ªã t·ª´ ch·ªëi.</p><p>H√£y vi·∫øt tr√¨nh x√°c nh·∫≠n ƒë∆°n gi·∫£n nh·∫•t m√† ch√∫ng ta c√≥ th·ªÉ.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ _ _ = ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒê·ªëi s·ªë ƒë·∫ßu ti√™n l√† d·ªØ li·ªáu, ƒë·ªëi s·ªë th·ª© hai l√† tr√¨nh chu·ªôc v√† ƒë·ªëi s·ªë th·ª©
ba l√† ng·ªØ c·∫£nh. ƒêi·ªÅu ƒë∆°n gi·∫£n nh·∫•t m√† ch√∫ng ta c√≥ th·ªÉ l√†m l√† ho√†n to√†n
b·ªè qua c·∫£ ba ƒë·ªëi s·ªë v√† quay tr·ªü l·∫°i ngay l·∫≠p t·ª©c <code>()</code>.</p><p>ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† ƒë·ªãa ch·ªâ t·∫≠p l·ªánh t∆∞∆°ng ·ª©ng v·ªõi tr√¨nh x√°c th·ª±c n√†y
kh√¥ng quan t√¢m ƒë·∫øn d·ªØ li·ªáu, n√≥ kh√¥ng quan t√¢m ƒë·∫øn tr√¨nh ƒë·ªïi v√† kh√¥ng
quan t√¢m ƒë·∫øn ng·ªØ c·∫£nh. N√≥ s·∫Ω lu√¥n th√†nh c√¥ng v√† ƒëi·ªÅu n√†y c√≥ nghƒ©a l√† b·∫•t
k·ª≥ giao d·ªãch n√†o c≈©ng c√≥ th·ªÉ s·ª≠ d·ª•ng t·∫≠p l·ªánh t·∫°i ƒë·ªãa ch·ªâ n√†y l√†m ƒë·∫ßu
v√†o. Kh√¥ng quan tr·ªçng d·ªØ li·ªáu n√†o t·ªìn t·∫°i cho UTxO t·∫°i ƒë·ªãa ch·ªâ t·∫≠p l·ªánh
n√†y, kh√¥ng quan tr·ªçng c√¥ng c·ª• ƒë·ªïi qu√† n√†o ƒë∆∞·ª£c s·ª≠ d·ª•ng cho giao d·ªãch v√†
giao d·ªãch c√≥ c·∫•u tr√∫c n√†o kh√¥ng quan tr·ªçng.</p><p>N·∫øu b·∫°n g·ª≠i b·∫•t k·ª≥ kho·∫£n ti·ªÅn n√†o ƒë·∫øn ƒë·ªãa ch·ªâ t·∫≠p l·ªánh n√†y, b·∫•t k·ª≥ ai
c≈©ng c√≥ th·ªÉ nh·∫≠n ngay.</p><p>H√†m n√†y ch∆∞a ph·∫£i l√† m√£ Plutus, n√≥ ch·ªâ l√† m·ªôt h√†m Haskell. ƒê·ªÉ bi·∫øn n√≥
th√†nh m·ªôt t·∫≠p l·ªánh Plutus, ch√∫ng ta c·∫ßn ph·∫£i bi√™n d·ªãch n√≥.</p><p>K·∫øt qu·∫£ c·ªßa qu√° tr√¨nh bi√™n d·ªãch c·ªßa ch√∫ng t√¥i sang Plutus s·∫Ω thu·ªôc lo·∫°i
<code>Validator</code>. B√™n d∆∞·ªõi h√†m trong <code>Gift.hs</code>, ch√∫ng t√¥i th√™m ƒëo·∫°n m√£ sau.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">validator :: Validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">validator = mkValidatorScript $$(PlutusTx.compile [|| mkValidator ||])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>C√°c ch·ª©c nƒÉng <code>mkValidatorScript</code> mang ki·ªÉu
<code>CompiledCode (Data -&gt; Data -&gt; Data -&gt; ()) -&gt; Validator</code>. Nh·∫±m m·ª•c ƒë√≠ch
t·∫°o ki·ªÉu n√†y v√† bi√™n d·ªãch t·∫≠p l·ªánh <code>mkValidator</code> b·∫±ng c√°ch s·ª≠ d·ª•ng m·ªôt
th·ª© g·ªçi l√† Template Haskell.</p><p>Template Haskell l√† m·ªôt t√≠nh nƒÉng n√¢ng cao c·ªßa Haskell gi·∫£i quy·∫øt m·ªôt
v·∫•n ƒë·ªÅ t∆∞∆°ng t·ª± nh∆∞ c√°c h·ªá th·ªëng macro trong c√°c ng√¥n ng·ªØ kh√°c. Macro l√†
th·ª© ƒë∆∞·ª£c m·ªü r·ªông t·∫°i th·ªùi ƒëi·ªÉm bi√™n d·ªãch.</p><p>V√¨ v·∫≠y, v·ªõi m√£ n√†y</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">$$(PlutusTx.compile [|| mkValidator ||])</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng t√¥i ƒëang y√™u c·∫ßu tr√¨nh bi√™n d·ªãch vi·∫øt m√£ cho h√†m <code>validator</code> t·∫°i
th·ªùi ƒëi·ªÉm bi√™n d·ªãch d·ª±a tr√™n <code>mkValidatorh√†m</code> c·ªßa ch√∫ng ta , v√† sau ƒë√≥
ti·∫øn h√†nh bi√™n d·ªãch b√¨nh th∆∞·ªùng.</p><p>B·∫°n kh√¥ng c·∫ßn ph·∫£i hi·ªÉu nhi·ªÅu v·ªÅ Template Haskell ƒë·ªÉ vi·∫øt Plutus v√¨ n√≥
lu√¥n lu√¥n gi·ªëng nhau. Khi b·∫°n ƒë√£ xem m·ªôt v√†i v√≠ d·ª•, b·∫°n c√≥ th·ªÉ √≠t nhi·ªÅu
ch·ªâ c·∫ßn sao ch√©p v√† d√°n.</p><p>M·∫´u Haskell hy v·ªçng t·∫•t c·∫£ m√£ s·∫Ω c√≥ s·∫µn trong Oxford Brackets - <code>[| |]</code>.</p><p>V·ªõi c√°c tr√¨nh x√°c th·ª±c ph·ª©c t·∫°p h∆°n, b·∫°n c√≥ th·ªÉ s·∫Ω d·ª±a v√†o nhi·ªÅu h√†m tr·ª£
gi√∫p v√† b·∫°n kh√¥ng mu·ªën ph·∫£i th√™m ch√∫ng v√†o trong D·∫•u ngo·∫∑c ƒë∆°n Oxford.
ƒê·ªÉ tr√°nh ƒëi·ªÅu n√†y, c√≥ m·ªôt ƒëi·ªÅu ch√∫ng ta c·∫ßn l√†m ƒë·ªëi v·ªõi <code>mkValidator</code>
h√†m v√† ƒë√≥ l√† l√†m cho n√≥ c√≥ th·ªÉ nh·∫≠p ƒë∆∞·ª£c b·∫±ng c√°ch th√™m th√¥ng s·ªë
<code>INLINABLE</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# INLINABLE mkValidator #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ _ _ = ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>B·∫°n s·∫Ω th·∫•y ƒëi·ªÅu n√†y th∆∞·ªùng xuy√™n trong c√°c t·∫≠p l·ªánh Plutus v√† n√≥ th∆∞·ªùng
l√† m·ªôt d·∫•u hi·ªáu cho th·∫•y m·ªôt h√†m ƒë∆∞·ª£c s·ª≠ d·ª•ng trong m·ªôt t·∫≠p l·ªánh x√°c
th·ª±c. T·∫•t c·∫£ c√°c ch·ª©c nƒÉng m√† tr√¨nh x√°c nh·∫≠n ph·ª• thu·ªôc ph·∫£i c√≥ th·ªÉ nh·∫≠p
ƒë∆∞·ª£c.</p><p>H√£y quay l·∫°i REPL v√† xem x√©t tr√¨nh x√°c nh·∫≠n.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">:l src/Week02/Gift.hs</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Ok, one module loaded.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Week02.Gift&gt; import Ledger.Scripts</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Ledger.Scripts Week02.Gift&gt; validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Validator { &lt;script&gt; }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng t√¥i c√≥ th·ªÉ y√™u c·∫ßu th√¥ng tin v·ªÅ <code>Validator</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Ledger.Scripts Week02.Gift&gt; :i Validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">type Validator :: *</span></div><div class="token-line" style="color:#393A34"><span class="token plain">newtype Validator = Validator {getValidator :: Script}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Eq Validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Ord Validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Show Validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng ta th·∫•y r·∫±ng n√≥ l√† m·ªôt l·ªõp bao b·ªçc xung quanh <code>getValidator</code></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Ledger.Scripts Week02.Gift&gt; getValidator validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">&lt;Script&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Sau ƒë√≥, ch√∫ng ta c√≥ th·ªÉ l·∫•y m·ªôt s·ªë th√¥ng tin v·ªÅ <code>Script</code></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Ledger.Scripts Week02.Gift&gt; :i Script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">type Script :: *</span></div><div class="token-line" style="color:#393A34"><span class="token plain">newtype Script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  = Script {unScript :: plutus-core-0.1.0.0:UntypedPlutusCore.Core.Type.Program</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                          plutus-core-0.1.0.0:PlutusCore.DeBruijn.Internal.DeBruijn</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                          plutus-core-0.1.0.0:PlutusCore.Default.Universe.DefaultUni</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                          plutus-core-0.1.0.0:PlutusCore.Default.Builtins.DefaultFun</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                          ()}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Eq Script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Ord Script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Show Script</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-ledger-api-0.1.0.0:Plutus.V1.Ledger.Scripts‚Äô</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>V√† ·ªü ƒë√¢y ch√∫ng ta th·∫•y r·∫±ng ch√∫ng ta c√≥ m·ªôt unScripth√†m, ch√∫ng ta c√≥ th·ªÉ
ch·∫°y</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Ledger.Scripts Week02.Gift&gt; unScript $ getValidator validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Program () (Version () 1 0 0) (Apply () (Apply () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (Apply () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (Apply () (Apply () (Apply () (Apply () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 1}))) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 5})))))))) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 1}))))) (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 1})))))))))) (LamAbs () (DeBruijn {dbnIndex = 0}) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Var () (DeBruijn {dbnIndex = 5})) (Var () (DeBruijn {dbnIndex = 6}))))))))))) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (Var () (DeBruijn {dbnIndex = 4})) (Var () (DeBruijn {dbnIndex = 7}))) (Var () (DeBruijn {dbnIndex = 6})))))))))))) (LamAbs () (DeBruijn {dbnIndex = 0}) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Var () (DeBruijn {dbnIndex = 3})) (Var () (DeBruijn {dbnIndex = 6}))))))))))) (LamAbs () (DeBruijn {dbnIndex = 0}) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Var () (DeBruijn {dbnIndex = 2})) (Var () (DeBruijn {dbnIndex = 6}))))))))))) (LamAbs () (DeBruijn {dbnIndex = 0}) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Var () (DeBruijn {dbnIndex = 1})) (Var () (DeBruijn {dbnIndex = 6}))))))))))) (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 1}))))))) (Delay () (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 2}))))))) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (Var () (DeBruijn {dbnIndex = 1})) (Var () (DeBruijn {dbnIndex = 4}))) (Var () (DeBruijn {dbnIndex = 3})))))))))) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 1}))))))) (Delay () (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (LamAbs () (DeBruijn {dbnIndex = 0}) (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (Apply () (Apply () (Var () (DeBruijn {dbnIndex = 1})) (Var () (DeBruijn {dbnIndex = 3}))) (Var () (DeBruijn {dbnIndex = 2})))))))))) (Delay () (Delay () (LamAbs () (DeBruijn {dbnIndex = 0}) (Var () (DeBruijn {dbnIndex = 1}))))))</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>V√† ·ªü ƒë√¢y b·∫°n c√≥ th·ªÉ th·∫•y b·∫£n tr√¨nh b√†y trung th·ª±c ƒë·∫øn t·ªët ƒë·∫πp c·ªßa t·∫≠p
l·ªánh Plutus Core cho tr√¨nh x√°c th·ª±c.</p><p>Quay l·∫°i m√£.</p><p>B√¢y gi·ªù ch√∫ng t√¥i c√≥ tr√¨nh x√°c th·ª±c ƒë·∫ßu ti√™n c·ªßa m√¨nh, c√≥ hai lo·∫°i n·ªØa
m√† ch√∫ng t√¥i c√≥ th·ªÉ x√°c ƒë·ªãnh.</p><p>M·ªôt l√† \&#x27;\&#x27;ValidatorHash\&#x27;\&#x27;, nh∆∞ t√™n cho th·∫•y, l√† bƒÉm c·ªßa tr√¨nh x√°c
nh·∫≠n.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">valHash :: Ledger.ValidatorHash</span></div><div class="token-line" style="color:#393A34"><span class="token plain">valHash = Scripts.validatorHash validator</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>V√†, ch√∫ng t√¥i c≈©ng c√≥ th·ªÉ bi·∫øn tr√¨nh x√°c th·ª±c th√†nh ƒë·ªãa ch·ªâ t·∫≠p l·ªánh, l√†
ƒë·ªãa ch·ªâ c·ªßa t·∫≠p l·ªánh tr√™n blockchain.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">scrAddress :: Ledger.Address</span></div><div class="token-line" style="color:#393A34"><span class="token plain">scrAddress = ScriptAddress valHash</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>B√¢y gi·ªù ch√∫ng ta c√≥ m·ªôt ƒë·ªãa ch·ªâ t·∫≠p l·ªánh ƒë∆∞·ª£c bi·ªÉu di·ªÖn d∆∞·ªõi d·∫°ng
<code>scrAddress</code>.</p><p>Ch√∫ng ta c√≥ th·ªÉ xem x√©t hai k·∫øt qu·∫£ n√†y trong REPL</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI haskell"><div tabindex="0" class="prism-code language-haskell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Ledger.Scripts Week02.Gift</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">valHash</span></div><div class="token-line" style="color:#393A34"><span class="token plain">c3168d465a84b7f50c2eeb51ccacd53a305bd7883787adb54236d8d17535ca14</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Ledger.Scripts Week02.Gift</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">scrAddress Address</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{addressCredential = ScriptCredential</span></div><div class="token-line" style="color:#393A34"><span class="token plain">c3168d465a84b7f50c2eeb51ccacd53a305bd7883787adb54236d8d17535ca14,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">addressStakingCredential = Nothing}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ngo·∫°i tr·ª´ h√†m logic <code>mkValidator</code> (trong tr∆∞·ªùng h·ª£p c·ªßa ch√∫ng ta l√† m·ªôt
d√≤ng), ph·∫ßn c√≤n l·∫°i c·ªßa m√£ ch√∫ng ta ƒë√£ vi·∫øt cho ƒë·∫øn nay l√† b·∫£n so·∫°n s·∫µn
v√† s·∫Ω r·∫•t gi·ªëng nhau ƒë·ªëi v·ªõi t·∫•t c·∫£ c√°c t·∫≠p l·ªánh Plutus.</p><p>ƒê·ªÉ th·ª±c s·ª± th·ª≠ t·∫≠p l·ªánh n√†y, ch√∫ng t√¥i c·∫ßn m√£ v√≠. Tr·ªçng t√¢m c·ªßa b√†i
gi·∫£ng n√†y l√† x√°c nh·∫≠n v√† kh√¥ng ph·∫£i m√£ v√≠, nh∆∞ng ng·∫Øn g·ªçn, ƒë√¢y l√† ph·∫ßn
c√≤n l·∫°i c·ªßa m√£.</p><p>Hai ƒëi·ªÉm cu·ªëi ƒë∆∞·ª£c x√°c ƒë·ªãnh. ƒêi·ªÉm cu·ªëi l√† c√°ch ƒë·ªÉ ng∆∞·ªùi d√πng k√≠ch ho·∫°t
m·ªôt th·ª© g√¨ ƒë√≥ v·ªõi c√°c tham s·ªë ƒë·∫ßu v√†o.</p><p><code>Endpoint give</code> s·∫Ω l·∫•y m·ªôt ƒë·ªëi s·ªë <code>Integer</code> ƒë·ªÉ ch·ªâ ƒë·ªãnh s·ªë l∆∞·ª£ng
lovelace s·∫Ω ƒë∆∞·ª£c g·ª≠i v√†o h·ª£p ƒë·ªìng.</p><p><code>Endpoint grab</code> s·∫Ω kh√¥ng c√≥ ƒë·ªëi s·ªë v√† s·∫Ω ƒë∆°n gi·∫£n t√¨m ki·∫øm c√°c UTxO t·∫°i
ƒë·ªãa ch·ªâ t·∫≠p l·ªánh n√†y v√† s·ª≠ d·ª•ng ch√∫ng.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">type GiftSchema =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            Endpoint &quot;give&quot; Integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        .\/ Endpoint &quot;grab&quot; ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><code>endpoint give</code> ·ª≠ d·ª•ng h√†m tr·ª£ gi√∫p <code>mustPayToOtherScript</code> h√†m n√†y l·∫•y
<code>valHash</code> c·ªßa t·∫≠p l·ªánh ng∆∞·ªùi nh·∫≠n v√† m·ªôt h√†m <code>Datum</code> C√°i m√† trong v√≠ d·ª•
n√†y l√† ho√†n to√†n b·ªã b·ªè qua. n√≥ s·ª≠ d·ª•ng h√†m t·∫°o <code>Datum</code> ƒë·ªÉ bi·∫øn <code>Data</code>
th√†nh <code>Datum</code>. Trong tr∆∞·ªùng h·ª£p n√†y <code>Data</code> ƒë∆∞·ª£c s·ª≠ d·ª•ng b·∫±ng c√°ch s·ª≠
d·ª•ng <code>Constr</code> h√†m t·∫°o l·∫•y 0 v√† m·ªôt danh s√°ch tr·ªëng.</p><p>Cu·ªëi c√πng s·ªë ti·ªÅn c·∫ßn g·ª≠i ƒë·∫øn ƒë·ªãa ch·ªâ ƒë∆∞·ª£c ch·ªâ ƒë·ªãnh b·∫±ng c√°ch s·ª≠ d·ª•ng
ch·ª©c nƒÉng tr·ª£ gi√∫p <code>ADA.lovelaceValueOf</code>.</p><p>Giao d·ªãch sau ƒë√≥ ƒë∆∞·ª£c g·ª≠i ƒëi, t·∫≠p l·ªánh ch·ªù n√≥ ƒë∆∞·ª£c x√°c nh·∫≠n v√† sau ƒë√≥ in
th√¥ng b√°o nh·∫≠t k√Ω.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">give :: AsContractError e =&gt; Integer -&gt; Contract w s e ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">give amount = do</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   let tx = mustPayToOtherScript valHash (Datum $ Constr 0 []) $ ADA.lovelaceValueOf amount</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   ledgerTx &lt;- submitTx tx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   void $ awaitTxConfirmed $ txId ledgerTx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   logInfo @String $ printf &quot;made a gift of %d lovelace&quot; amount</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><code>endpoint grab</code> ph·ª©c t·∫°p h∆°n m·ªôt ch√∫t.</p><p>Ch√∫ng t√¥i s·ª≠ d·ª•ng <code>utxoAt</code> ƒë·ªãa ch·ªâ t·∫≠p l·ªánh m·ªõi c·ªßa m√¨nh <code>scrAddress</code> ƒë·ªÉ
tra c·ª©u t·∫•t c·∫£ c√°c UTxO ·ªü ƒë·ªãa ch·ªâ ƒë√≥. Sau ƒë√≥, ch√∫ng t√¥i c·∫ßn tra c·ª©u, s·∫Ω
ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi v√≠ ƒë·ªÉ t·∫°o giao d·ªãch. T·∫°i ƒë√¢y, ch√∫ng t√¥i cho v√≠ bi·∫øt n∆°i
t√¨m t·∫•t c·∫£ c√°c UTxO v√† ch√∫ng t√¥i th√¥ng b√°o cho v√≠ v·ªÅ tr√¨nh x√°c th·ª±c. H√£y
nh·ªõ r·∫±ng, n·∫øu b·∫°n mu·ªën s·ª≠ d·ª•ng UTxO ·ªü m·ªôt ƒë·ªãa ch·ªâ t·∫≠p l·ªánh, th√¨ giao
d·ªãch chi ti√™u c·∫ßn cung c·∫•p m√£ x√°c th·ª±c, trong khi giao d·ªãch t·∫°o ra UTxO
ch·ªâ c·∫ßn cung c·∫•p h√†m bƒÉm.</p><p>Sau ƒë√≥, ch√∫ng t√¥i x√°c ƒë·ªãnh giao d·ªãch b·∫±ng c√°ch s·ª≠ d·ª•ng
<code>mustSpendScriptOutput</code> cho m·ªói UTxO ƒë∆∞·ª£c t√¨m th·∫•y. ƒêi·ªÅu n√†y n√≥i l√™n
r·∫±ng m·ªçi UTxO ·ªü ƒë·ªãa ch·ªâ t·∫≠p l·ªánh n√†y ph·∫£i ƒë∆∞·ª£c chi ti√™u b·∫±ng giao d·ªãch
m√† ch√∫ng t√¥i ƒëang x√¢y d·ª±ng.</p><p>Ch√∫ng t√¥i c≈©ng chuy·ªÉn m·ªôt c√¥ng c·ª• ƒë·ªïi qu√† ho√†n to√†n b·ªã b·ªè qua trong v√≠
d·ª• c·ªßa ch√∫ng t√¥i, v√¨ v·∫≠y ch√∫ng t√¥i c√≥ th·ªÉ ƒë·∫∑t b·∫•t k·ª≥ th·ª© g√¨ ·ªü ƒë√≥ - trong
tr∆∞·ªùng h·ª£p n√†y, m·ªôt c√¥ng c·ª• ƒë·ªïi qu√† ƒë∆∞·ª£c t·∫°o b·∫±ng c√°ch s·ª≠ d·ª•ng h√†m t·∫°o
<code>I</code> c·ªßa lo·∫°i <code>Data</code> c√≥ gi√° tr·ªã l√† <code>17</code>.</p><p>M·ªôt l·∫ßn n·ªØa, ch√∫ng t√¥i g·ª≠i, ch·ªù x√°c nh·∫≠n v√† sau ƒë√≥ vi·∫øt th√¥ng b√°o nh·∫≠t
k√Ω.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">grab :: forall w s e. AsContractError e =&gt; Contract w s e ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">grab = do</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   utxos &lt;- utxoAt scrAddress</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   let orefs   = fst &lt;$&gt; Map.toList utxos</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      lookups  = Constraints.unspentOutputs utxos      &lt;&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                 Constraints.otherScript validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      tx :: TxConstraints Void Void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      tx       = mconcat [mustSpendScriptOutput oref $ Redeemer $ I 17 | oref &lt;- orefs]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   ledgerTx &lt;- submitTxConstraintsWith @Void lookups tx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   void $ awaitTxConfirmed $ txId ledgerTx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   logInfo @String $ &quot;collected gifts&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Cu·ªëi c√πng, ch√∫ng t√¥i ƒë·∫∑t t·∫•t c·∫£ l·∫°i v·ªõi nhau trong h√†m <code>endpoints</code>. ƒê√¢y
l√† m√£ so·∫°n s·∫µn th√¥ng b√°o cho v√≠ cung c·∫•p t√πy ch·ªçn c·ªßa m·ªôt s·ªë ƒëi·ªÉm cu·ªëi
nh·∫•t ƒë·ªãnh cho ng∆∞·ªùi d√πng v√† sau ƒë√≥, khi m·ªôt ƒëi·ªÉm cu·ªëi ƒë√£ ƒë∆∞·ª£c ch·ªçn, s·∫Ω
l·∫∑p l·∫°i v√† ti·∫øp t·ª•c cung c·∫•p c√°c t√πy ch·ªçn t∆∞∆°ng t·ª± l·∫∑p ƒëi l·∫∑p l·∫°i. Trong
tr∆∞·ªùng h·ª£p c·ªßa <code>give</code> ng∆∞·ªùi d√πng s·∫Ω ƒë∆∞·ª£c y√™u c·∫ßu cung c·∫•p ƒë·ªëi s·ªë
<code>Integer</code> .</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">endpoints :: Contract () GiftSchema Text ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">endpoints = (give&#x27; `select` grab&#x27;) &gt;&gt; endpoints</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  where</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    give&#x27; = endpoint @&quot;give&quot; &gt;&gt;= give</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    grab&#x27; = endpoint @&quot;grab&quot; &gt;&gt;  grab</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Sau ƒë√≥, ch√∫ng t√¥i c√≥ m·ªôt l·ªánh nh·ªè.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkSchemaDefinitions &#x27;&#x27;GiftSchema</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>V√† sau ƒë√≥ m·ªôt s·ªë m√£ ch·ªâ ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi Plutus Playground cho ph√©p
ch√∫ng t√¥i ch·ªâ ƒë·ªãnh c√°c m√£ th√¥ng b√°o b·ªï sung c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ th·ª≠
nghi·ªám.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkKnownCurrencies []</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Th·ª≠ Nghi·ªám +++++++</p><p>B√¢y gi·ªù ch√∫ng t√¥i s·∫Ω th·ª≠ nghi·ªám script <code>Gift</code> trong playground.</p><p>B·∫°n Copy <code>Gift</code> v√†o playground, sau ƒë√≥ bi√™n d·ªãch t·∫≠p l·ªánh trong
playground and nh·∫•n n√∫t <code>Simulate</code>.</p><p><img src="/assets/images/playground_week2_1-84fa9ef5e0adf20ce81d4328f8f57ab2.png"></p><p>Gi·ªù h√£y th√™m m·ªôt chi·∫øc v√≠ th·ª© ba v√† cung c·∫•p cho t·∫•t c·∫£ c√°c v√≠ 10 ADA
(10 tri·ªáu lovelace).</p><p><img src="/assets/images/pic__00024-fc070116d4be973a3ba383b03c005097.png"></p><p>Ch√∫ng t√¥i s·∫Ω t·∫°o m·ªôt k·ªãch b·∫£n trong ƒë√≥ v√≠ 1 v√† 2 cho c·∫£m gi√°c y√™u th√≠ch
v√† v√≠ 3 l·∫•y t·∫•t c·∫£.</p><p>B·∫°n s·∫Ω th·∫•y r·∫±ng s√¢n ch∆°i ƒë√£ hi·ªÉn th·ªã c√°c n√∫t giao di·ªán ng∆∞·ªùi d√πng cho
hai endpoints <code>give</code> v√† <code>grab</code>. S·ª≠ dung <code>endpoint give</code> ƒë·ªÉ t·∫°o v√≠ 1 t·∫∑ng
4 ADA v√† ƒë·ªÉ t·∫°o v√≠ 2 t·∫∑ng 6 ADA. Sau ƒë√≥, th√™m h√†nh ƒë·ªông ch·ªù ƒë·ªÉ ƒë·ª£i 1
kh·ªëi, v√† sau ƒë√≥ s·ª≠ d·ª•ng v√†o endpoints <code>grab</code> ƒë·ªÉ t·∫°o v√≠ 3 l·∫•y ti·ªÅn. Sau
ƒë√≥, th√™m m·ªôt h√†nh ƒë·ªông ch·ªù kh√°c ƒë·ªÉ ƒë·ª£i 1 kh·ªëi.</p><p><img src="/assets/images/pic__00025-cb338f1f02e5efb286814c5e7ff077c8.png"></p><p>V√† b√¢y gi·ªù h√£y nh·∫•p v√†o <code>Evaluate</code>. Ch√∫ng t√¥i th·∫•y r·∫±ng ƒë√£ c√≥ b·ªën giao
d·ªãch.</p><p>Giao d·ªãch ƒë·∫ßu ti√™n, nh∆∞ m·ªçi khi, l√† giao d·ªãch kh·ªüi ƒë·∫ßu ph√¢n ph·ªëi c√°c
kho·∫£n ti·ªÅn ban ƒë·∫ßu v√†o v√≠.</p><p><img src="/assets/images/pic__00026-fd4fa5d1c6c90705682a40f0802c175f.png"></p><p>V√† c√≥ hai giao d·ªãch x·∫£y ra t·∫°i khe 1. Ch√∫ng l√† hai giao d·ªãch <code>give</code></p><p>L·ªánh ƒë·∫ßu ti√™n, Tx 0, l√† t·ª´ v√≠ 2. Th·ª© t·ª± ·ªü ƒë√¢y kh√¥ng ƒë∆∞·ª£c x√°c ƒë·ªãnh b·ªüi
th·ª© t·ª± m√† ch√∫ng t√¥i ƒë√£ t·∫°o c√°c giao d·ªãch trong tr√¨nh m√¥ ph·ªèng. ƒêi·ªÅu quan
tr·ªçng c·∫ßn l∆∞u √Ω l√† c·∫£ hai giao d·ªãch <code>give</code> ƒë·ªÅu x·∫£y ra t·∫°i c√πng m·ªôt th·ªùi
ƒëi·ªÉm.</p><p>Ch√∫ng t√¥i th·∫•y ba k·∫øt qu·∫£ ƒë·∫ßu ra. ƒê·∫ßu ra ƒë·∫ßu ti√™n l√† ph√≠ 10 lovelace
ƒë∆∞·ª£c tr·∫£ b·∫±ng v√≠ 2. ƒê·∫ßu ra th·ª© hai l√† 6 ADA ƒë∆∞·ª£c g·ª≠i ƒë·∫øn ƒë·ªãa ch·ªâ t·∫≠p
l·ªánh v√† ƒë·∫ßu ra th·ª© ba l√† tr·∫£ v·ªÅ thay ƒë·ªïi cho v√≠ 2, l√† 4 ADA tr·ª´ ƒëi ph√≠.</p><p><img src="/assets/images/pic__00027-e8009bfb355342d158a40571df197cac.png"></p><p>V√† th·ª© hai, Tx 1, l√† t·ª´ v√≠ 1. M·ªôt l·∫ßn n·ªØa, v·ªõi c√°c UTxO ƒë·∫ßu ra t∆∞∆°ng t·ª±.</p><p>B√¢y gi·ªù ch√∫ng ta c√≥ hai UTxO ·ªü ƒë·ªãa ch·ªâ t·∫≠p
l·ªánh.</p><p><img src="/assets/images/pic__00028-66b232b1994c20e6619f4af11449506f.png"></p><p>Sau ƒë√≥, ch√∫ng t√¥i c√≥ <code>grab</code> t·∫°i v·ªã tr√≠ 2 ƒë∆∞·ª£c k√≠ch ho·∫°t b·ªüi v√≠ 3. Ch√∫ng
t√¥i th·∫•y hai UTxO t·ª´ t·∫≠p l·ªánh l√† ƒë·∫ßu v√†o v√† sau ƒë√≥ l√† hai ƒë·∫ßu ra. M·ªôt
ƒë·∫ßu ra l√† ph√≠ v√† ƒë·∫ßu ra c√≤n l·∫°i, ƒë∆∞·ª£c tr·∫£ cho v√≠ 3, l√† 10 ADA tr·ª´ ƒëi c√°c
kho·∫£n ph√≠ ƒë√≥. B·∫°n s·∫Ω nh·∫≠n th·∫•y r·∫±ng ph√≠ hi·ªán cao h∆°n ch√∫ng ta ƒë√£ th·∫•y
tr∆∞·ªõc ƒë√¢y v√† ƒëi·ªÅu n√†y l√† do m·ªôt t·∫≠p l·ªánh hi·ªán ƒë√£ ƒë∆∞·ª£c th·ª±c thi, ƒëi·ªÅu n√†y
l√†m cho n√≥ ƒë·∫Øt h∆°n. Tuy nhi√™n, c√°c kho·∫£n ph√≠ ·ªü ƒë√¢y v·∫´n ch∆∞a ƒë∆∞·ª£c hi·ªáu
ch·ªânh ho√†n to√†n v·ªõi nh·ªØng kho·∫£n ph√≠ s·∫Ω ƒë∆∞·ª£c t√≠nh tr√™n blockchain th·ª±c.</p><p><img src="/assets/images/pic__00029-2a114f78397694fc83c5e65c55af660a.png"></p><p>V√†, b·∫±ng c√°ch cu·ªôn xu·ªëng, ch√∫ng t√¥i th·∫•y s·ªë d∆∞ cu·ªëi c√πng c·ªßa v√≠.</p><p><img src="/assets/images/pic__00030-beb4a9a337af2382a2b37dbee182a890.png"></p><p>N·∫øu b·∫°n cu·ªôn xu·ªëng s√¢u h∆°n, b·∫°n s·∫Ω th·∫•y m·ªôt s·ªë d·∫•u v·∫øt v√† k·∫øt qu·∫£ ƒë·∫ßu ra
nh·∫≠t k√Ω s·∫Ω cung c·∫•p th√™m chi ti·∫øt v·ªÅ vi·ªác th·ª±c thi.</p><p>Nh∆∞ ƒë√£ ƒë·ªÅ c·∫≠p, t·∫≠p l·ªánh n√†y s·ª≠ d·ª•ng tr√¨nh x√°c th·ª±c ƒë∆°n gi·∫£n nh·∫•t c√≥ th·ªÉ,
m·ªôt tr√¨nh x√°c th·ª±c lu√¥n th√†nh c√¥ng. Nh∆∞ng tr√¨nh x√°c th·ª±c nh·ªè ng·ªõ ng·∫©n
n√†y c√≥ th·ªÉ h·ªØu √≠ch trong t√¨nh hu·ªëng ai ƒë√≥ mu·ªën ƒë√≥ng g√≥p m·ªôt s·ªë bi·ªÉu
t∆∞·ª£ng t√¨nh y√™u cho c·ªông ƒë·ªìng v√† ƒë·ªÉ l·∫°i cho b·∫°n!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="v√≠-d·ª•-2---burn"></a>V√≠ d·ª• 2 - Burn<a class="hash-link" href="#v√≠-d·ª•-2---burn" title="Direct link to heading">#</a></h3><p>H√£y xem v√≠ d·ª• th·ª© hai v·ªÅ tr√¨nh x√°c nh·∫≠n.</p><p>Ch√∫ng ta s·∫Ω b·∫Øt ƒë·∫ßu b·∫±ng c√°ch sao ch√©p <code>Gift.hs</code>v√† ƒë·ªïi t√™n n√≥ <code>Burn.hs</code>.</p><p>Trong v√≠ d·ª• <code>Gift</code>, ch√∫ng t√¥i c√≥ m·ªôt tr√¨nh x√°c nh·∫≠n lu√¥n th√†nh c√¥ng.
Trong v√≠ d·ª• n√†y, ch√∫ng t√¥i mu·ªën l√†m ng∆∞·ª£c l·∫°i - m·ªôt tr√¨nh x√°c nh·∫≠n lu√¥n
kh√¥ng th√†nh c√¥ng.</p><p>Nh·ªõ l·∫°i r·∫±ng tr√¨nh x√°c th·ª±c ch·ªâ ra s·ª± th·∫•t b·∫°i b·∫±ng c√°ch n√©m ra m·ªôt l·ªói.
V√¨ v·∫≠y, ch√∫ng t√¥i c√≥ th·ªÉ s·ª≠a ƒë·ªïi tr√¨nh x√°c th·ª±c c·ªßa m√¨nh cho ph√π h·ª£p.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ _ _ = error ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N·∫øu ch√∫ng t√¥i t·∫£i m√¥-ƒëun trong REPL v√† nh√¨n th·∫•y <em>error</em></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude Week02.Burn&gt; :t error</span></div><div class="token-line" style="color:#393A34"><span class="token plain">error :: [Char] -&gt; a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng t√¥i th·∫•y ƒë·ªãnh nghƒ©a cho ch·ª©c nƒÉng <code>error</code> ƒë∆∞·ª£c x√°c ƒë·ªãnh trong
Haskell ti√™u chu·∫©n <code>Prelude</code>. Tuy nhi√™n, m·ªôt trong ph·∫°m vi trong m√£ c·ªßa
ch√∫ng t√¥i tr√™n th·ª±c t·∫ø l√† ch·ª©c nƒÉng <code>error</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude Week02.Burn&gt; :t PlutusTx.Prelude.error</span></div><div class="token-line" style="color:#393A34"><span class="token plain">PlutusTx.Prelude.error :: () -&gt; a</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Th√¥ng th∆∞·ªùng trong Haskell, b·∫°n c√≥ h√†m <code>error</code> nh·∫≠n m·ªôt chu·ªói th√¥ng b√°o
l·ªói v√† g√¢y ra l·ªói. Trong Plutus, h√†m <code>error</code>kh√¥ng nh·∫≠n m·ªôt chu·ªói - n√≥
ch·ªâ nh·∫≠n khi·ªÉu tr·ªëng <code>()</code> v√† tr·∫£ v·ªÅ m·ªôt ki·ªÉu t√πy √Ω.</p><p>V√† ƒëi·ªÅu ƒë√≥ ƒë∆∞a ch√∫ng ta ƒë·∫øn m·ªôt ƒëi·ªÉm quan tr·ªçng.</p><p>Ch√∫ng t√¥i ƒë√£ ƒë·ªÅ c·∫≠p tr∆∞·ªõc ƒë√≥ r·∫±ng ch√∫ng t√¥i s·ª≠ d·ª•ng <code>INLINABLE</code> tr√™n h√†m
<code>mkValidator</code> ƒë·ªÉ cho ph√©p n√≥ ƒë∆∞·ª£c s·ª≠ d·ª•ng b·ªüi m√£ Haskell Prelude. Trong
Haskell c√≥ nhi·ªÅu ch·ª©c nƒÉng c√≥ s·∫µn th√¥ng qua m√¥-ƒëun <code>Prelude</code>, nh∆∞ng
nh·ªØng ch·ª©c nƒÉng n√†y s·∫Ω kh√¥ng th·ªÉ s·ª≠ d·ª•ng ƒë∆∞·ª£c trong Plutus v√¨ ch√∫ng
kh√¥ng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a l√† c√≥ th·ªÉ nh·∫≠p ƒë∆∞·ª£c. V√¨ v·∫≠y, nh√≥m Plutus ƒë√£ cung
c·∫•p m·ªôt ƒêo·∫°n d·∫°o ƒë·∫ßu thay th·∫ø c√≥ th·ªÉ ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ x√°c nh·∫≠n.</p><p>C√°ch m√† Plutus Prelude c√≥ th·ªÉ ƒë∆∞·ª£c ∆∞u ti√™n h∆°n Haskell Prelude, th∆∞·ªùng
c√≥ trong ph·∫°m vi theo m·∫∑c ƒë·ªãnh, l√† s·ª≠ d·ª•ng <code>LANGUAGE</code> trong m√£.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# LANGUAGE NoImplicitPrelude   #-}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Sau ƒë√≥, b·∫±ng c√°ch nh·∫≠p PlutusTx.Prelude, c√°c ch·ª©c nƒÉng c·ªßa n√≥ ƒë∆∞·ª£c s·ª≠
d·ª•ng thay cho c√°c ch·ª©c nƒÉng Prelude ti√™u chu·∫©n.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">import PlutusTx.Prelude hiding (Semigroup(..), unless)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>B·∫°n c≈©ng c√≥ th·ªÉ nh·∫≠n th·∫•y r·∫±ng Prelude ti√™u chu·∫©n c≈©ng ƒë∆∞·ª£c nh·∫≠p kh·∫©u.
Tuy nhi√™n, n√≥ ch·ªâ nh·∫±m mang l·∫°i m·ªôt s·ªë ch·ª©c nƒÉng kh√¥ng li√™n quan g√¨ ƒë·∫øn
x√°c th·ª±c m√† ch·ªâ d√†nh cho m√£ off-chain v√† playground.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">import Prelude (IO, Semigroup (..), String)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N√≥ c√≥ th·ªÉ g√¢y nh·∫ßm l·∫´n. R·∫•t nhi·ªÅu ch·ª©c nƒÉng trong Plutus Prelude c√≥ c√πng
ch·ªØ k√Ω v√† h√†nh vi gi·ªëng nh∆∞ t√™n g·ªçi c·ªßa ch√∫ng trong Prelude ti√™u chu·∫©n,
nh∆∞ng ƒëi·ªÅu ƒë√≥ kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ƒë√∫ng v√† ƒë√¢y errorl√† m·ªôt v√≠ d·ª•.</p><p>Ch·ªâ c·∫ßn nh·ªõ r·∫±ng khi b·∫°n ƒëang s·ª≠ d·ª•ng m·ªôt c√°i g√¨ ƒë√≥ trong t·∫≠p l·ªánh
Plutus tr√¥ng gi·ªëng nh∆∞ m·ªôt h√†m t·ª´ ƒêo·∫°n d·∫°o ƒë·∫ßu ti√™u chu·∫©n, th√¨ nh·ªØng g√¨
b·∫°n th·ª±c s·ª± ƒëang s·ª≠ d·ª•ng l√† m·ªôt h√†m t·ª´ ƒêo·∫°n d·∫°o ƒë·∫ßu Plutus. Th∆∞·ªùng th√¨
ch√∫ng s·∫Ω c√≥ c√πng m·ªôt ch·ªØ k√Ω, nh∆∞ng ch√∫ng kh√¥ng ph·∫£i l√∫c n√†o c≈©ng gi·ªëng
h·ªát nhau - v√≠ d·ª•: ti·ªÅn l·ªá c·ªßa to√°n t·ª≠ c√≥ th·ªÉ kh√¥ng gi·ªëng nhau</p><p>Nh√¨n l·∫°i tr√¨nh x√°c th·ª±c m·ªõi c·ªßa ch√∫ng t√¥i, b√¢y gi·ªù ch√∫ng ta c√≥ m·ªôt tr√¨nh
x√°c th·ª±c s·∫Ω lu√¥n kh√¥ng th√†nh c√¥ng.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ _ _ = error ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng t√¥i s·∫Ω ƒë·ªÉ m·ªçi th·ª© kh√°c nh∆∞ c≈© v√† ki·ªÉm tra t√°c d·ª•ng c·ªßa s·ª± thay ƒë·ªïi
n√†y, b·∫±ng c√°ch s·ª≠ d·ª•ng s√¢n ch∆°i. Sau khi nh·∫•p <code>Compile</code>, k·ªãch b·∫£n tr∆∞·ªõc
ƒë√≥ v·∫´n s·∫Ω xu·∫•t hi·ªán trong tr√¨nh m√¥ ph·ªèng. V√† sau khi nh·∫•p <code>Evaluate</code> v√†
cu·ªôn xu·ªëng m·ªôt ch√∫t, ch√∫ng ta c√≥ th·ªÉ th·∫•y v√≠ 1 v√† 2 ƒë√£ t·∫°o qu√† t·∫∑ng
nh∆∞ng v√≠ 3 kh√¥ng th·ªÉ l·∫•y ƒë∆∞·ª£c.</p><p><img src="/assets/images/pic__00031-3f2f868104960170ff2ddbe80dbf1c0d.png"></p><p>N·∫øu ch√∫ng t√¥i cu·ªôn xu·ªëng th√™m, ch√∫ng t√¥i s·∫Ω t√¨m th·∫•y m·ªôt th√¥ng b√°o nh·∫≠t
k√Ω cho th·∫•y r·∫±ng vi·ªác x√°c th·ª±c kh√¥ng th√†nh c√¥ng.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.}"><div tabindex="0" class="prism-code language-{.} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">, Slot 2: 00000000-0000-4000-8000-000000000002 {Contract instance for wallet 3}:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      Contract instance stopped with error: &quot;WalletError (ValidationError (ScriptFailure (EvaluationError [])))&quot; ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>V√¨ v·∫≠y, trong v√≠ d·ª• ƒë·∫ßu ti√™n c·ªßa ch√∫ng t√¥i, ch√∫ng t√¥i c√≥ m·ªôt tr√¨nh x√°c
th·ª±c lu√¥n th√†nh c√¥ng v√† cho ph√©p b·∫•t k·ª≥ ai l·∫•y UTxO t·ª´ n√≥. Trong v√≠ d·ª•
th·ª© hai, ch√∫ng t√¥i c√≥ tr√¨nh x√°c th·ª±c lu√¥n kh√¥ng th√†nh c√¥ng v√† b·∫•t k·ª≥
UTxO n√†o ƒë∆∞·ª£c g·ª≠i ƒë·∫øn ƒë·ªãa ch·ªâ t·∫≠p l·ªánh n√†y kh√¥ng bao gi·ªù c√≥ th·ªÉ ƒë∆∞·ª£c
truy xu·∫•t. V·ªÅ c∆° b·∫£n ƒë√¢y l√† m·ªôt c√°ch ƒë·ªÉ ƒë·ªët ti·ªÅn, c√≥ th·ªÉ h·ªØu √≠ch trong
m·ªôt s·ªë tr∆∞·ªùng h·ª£p.</p><p>Khi nh√¨n v√†o nh·∫≠t k√Ω, ch√∫ng t√¥i th·∫•y r·∫±ng qu√° tr√¨nh x√°c nh·∫≠n kh√¥ng th√†nh
c√¥ng, nh∆∞ng ch√∫ng t√¥i kh√¥ng bi·∫øt t·∫°i sao n√≥ kh√¥ng th√†nh c√¥ng. ƒë√¢y l√† m·ªôt
c√°ch ƒë·ªÉ thay ƒë·ªïi ƒëi·ªÅu ƒë√≥ b·∫±ng c√°ch s·ª≠ d·ª•ng m·ªôt bi·∫øn th·ªÉ c·ªßa l·ªói -
<code>traceError</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude Week02.Burn&gt; :t PlutusTx.Prelude.traceError</span></div><div class="token-line" style="color:#393A34"><span class="token plain">PlutusTx.Prelude.traceError :: PlutusTx.Builtins.String -&gt; a      </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>H√†m nh·∫≠n m·ªôt chu·ªói, nh∆∞ng kh√¥ng ph·∫£i l√† m·ªôt chu·ªói Haskell. N√≥ l√† m·ªôt
chu·ªói Plutus. ƒê·ªÉ bi√™n d·ªãch c√°i n√†y, ch√∫ng ta c·∫ßn s·ª≠ d·ª•ng
OverloadedStringsph·∫ßn m·ªü r·ªông GHC.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# LANGUAGE OverloadedStrings   #-}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Sau ƒë√≥, ch√∫ng t√¥i c√≥ th·ªÉ c·∫≠p nh·∫≠t tr√¨nh x√°c th·ª±c c·ªßa m√¨nh.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ _ _ = traceError &quot;BURNT!&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N·∫øu b√¢y gi·ªù ch√∫ng t√¥i ch·∫°y c√πng m·ªôt k·ªãch b·∫£n trong s√¢n ch∆°i v·ªõi m√£ m·ªõi,
ch√∫ng t√¥i s·∫Ω th·∫•y th√¥ng b√°o l·ªói t√πy ch·ªânh m√† ch√∫ng t√¥i ƒë√£ th√™m.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.}"><div tabindex="0" class="prism-code language-{.} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">, Slot 2: 00000000-0000-4000-8000-000000000002 {Contract instance for wallet 3}:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      Contract instance stopped with error: &quot;WalletError (ValidationError (ScriptFailure (EvaluationError [\&quot;BURNT!\&quot;])))&quot; ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><img src="/assets/images/pic__00032-9f3b4bf174a2262ab7a70932ae78d756.png"></p><p>V√≠ d·ª• 3 - Forty Two (42) ~~~~~~~~~~~~~~~~~~~~~</p><p>ƒê·ªëi v·ªõi v√≠ d·ª• ti·∫øp theo, ch√∫ng t√¥i s·∫Ω vi·∫øt m·ªôt tr√¨nh x√°c nh·∫≠n kh√¥ng ho√†n
to√†n b·ªè qua t·∫•t c·∫£ c√°c ƒë·ªëi s·ªë c·ªßa n√≥. Ch√∫ng t√¥i s·∫Ω vi·∫øt m·ªôt b√†i b√°o mong
ƒë·ª£i m·ªôt ng∆∞·ªùi mua l·∫°i ƒë∆°n gi·∫£n.</p><p>B√¢y gi·ªù ch√∫ng ta quan t√¢m ƒë·∫øn ng∆∞·ªùi ƒë·ªïi qu√†, ch√∫ng ta c·∫ßn c√≥ th·ªÉ tham
kh·∫£o n√≥. H√£y g·ªçi n√≥ <code>r</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# INLINABLE mkValidator #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ r _</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Gi·∫£ s·ª≠ r·∫±ng ch√∫ng t√¥i mu·ªën x√°c th·ª±c ƒë∆∞·ª£c th√¥ng qua n·∫øu ng∆∞·ªùi ƒë·ªïi <code>I 42</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# INLINABLE mkValidator #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ r _</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   | r == I 42 = ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   | otherwise = traceError &quot;wrong redeemer&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N·∫øu ch√∫ng ta ch·∫°y ƒëi·ªÅu n√†y ngay b√¢y gi·ªù trong s√¢n ch∆°i, vi·ªác x√°c nh·∫≠n s·∫Ω
lu√¥n kh√¥ng th√†nh c√¥ng. Ch√∫ng t√¥i c·∫ßn s·ª≠a ƒë·ªïi m√£ off-chain ƒë·ªÉ th√™m ƒë·∫ßu
v√†o cho Endpoint <code>grab</code> ƒë·ªÉ v√≠ 3 c√≥ th·ªÉ chuy·ªÉn v√†o m·ªôt ƒëi·ªÉm <code>Integer</code> m√†
sau ƒë√≥ ch√∫ng t√¥i c√≥ th·ªÉ chuy·ªÉn cho tr√¨nh x√°c th·ª±c v·ªõi t∆∞ c√°ch l√†
redeemer.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">type GiftSchema =</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          Endpoint &quot;give&quot; Integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      .\/ Endpoint &quot;grab&quot; Integer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Chung t√¥i th√™m ƒë·ªëi s·ªë redeemer v√†o khai b√°o <code>grab</code>. L∆∞u √Ω r·∫±ng vi·ªác th√™m
s·ªë <code>Integer</code> trong ch·ª©c nƒÉng k√Ω, c≈©ng nh∆∞ tham s·ªë <code>n</code> c√°i m√† l√†m tham
chi·∫øu.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">grab :: forall w s e. AsContractError e =&gt; Integer -&gt; Contract w s e ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">grab n = do</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Sau ƒë√≥, ch√∫ng ta c√≥ th·ªÉ chuy·ªÉn n√≥ v√†o h√†m <code>mustSpendScriptOutput</code> thay
v√¨ gi√° tr·ªã v·ª©t b·ªè m√† ch√∫ng ta ƒë√£ s·ª≠ d·ª•ng tr∆∞·ªõc ƒë√≥.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">tx = mconcat [mustSpendScriptOutput oref $ Redeemer $ I n | oref &lt;- orefs]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>M·ªôt thay ƒë·ªïi n·ªØa, ch√∫ng ta c·∫ßn thay ƒë·ªïi <code>&gt;&gt;</code> th√†nh <code>&gt;&gt;=</code> trong ƒëo·∫°n m√£
sau, v√† b√¢y gi·ªù <code>grab</code> c√≥ m·ªôt ƒë·ªëi s·ªë. B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng REPL ƒë·ªÉ th·∫•y
<code>&gt;&gt;</code> v√† <code>&gt;&gt;=</code> v√† b√¢y gi·ªù t·∫°i sao d·ª´ng c√°i th·ª© hai. V·ªÅ c∆° b·∫£n, c·∫£ hai ƒë·ªÅu
tr√¨nh t·ª± c√°c h√†nh ƒë·ªông, nh∆∞ng <code>&gt;&gt;</code> kh√¥ng l·∫•y gi√° tr·ªã ƒë·∫ßu m√∫p,con <code>&gt;&gt;=</code>
truy c·∫≠p gi√° tr·ªã ƒë∆∞·ª£c bao b·ªçc v√† chuy·ªÉn n√≥ cho h√†nh ƒë·ªông ti·∫øp theo.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">grab&#x27; = endpoint @&quot;grab&quot; &gt;&gt;= grab</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>B√¢y gi·ªù ch√∫ng ta c√≥ th·ªÉ th·ª≠ n√≥ trong s√¢n ch∆°i. Sau khi th√™m m√£ m·ªõi v√†
nh·∫•p v√†o <code>Simulate</code> b·∫°n s·∫Ω nh·∫≠n th·∫•y r·∫±ng k·ªãch b·∫£n c≈© ƒë√£ bi·∫øn m·∫•t. ƒê√≥ l√†
b·ªüi v√¨ c√°c ƒëi·ªÉm cu·ªëi (Endpoint) ƒë√£ thay ƒë·ªïi v√† k·ªãch b·∫£n c≈© kh√¥ng c√≤n h·ª£p
l·ªá.</p><p>H√£y thi·∫øt l·∫≠p m·ªôt k·ªãch b·∫£n ch·ªâ s·ª≠ d·ª•ng hai v√≠. V√≠ m·ªôt s·∫Ω cung c·∫•p cho 3
ADA oo h·ª£p ƒë·ªìng v√† v√≠ 2 s·∫Ω c·ªë g·∫Øng l·∫•y ch√∫ng, nh∆∞ng l·∫ßn n√†y, v√≠ 2 s·∫Ω c·∫ßn
chuy·ªÉn v√†o m·ªôt gi√° tr·ªã s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ t·∫°o ng∆∞·ªùi ƒë·ªïi.</p><p>ƒê·ªëi v·ªõi l·∫ßn th·ª≠ ƒë·∫ßu ti√™n, ch√∫ng t√¥i s·∫Ω th√™m gi√° tr·ªã ng∆∞·ªùi ƒë·ªïi sai, trong
tr∆∞·ªùng h·ª£p n√†y l√† 100.</p><p><img src="/assets/images/pic__00033-2e906ca07048920ceb7b8359ca9c2dcb.png"></p><p>N·∫øu ch√∫ng t√¥i nh·∫•p v√†o <code>Evaluate</code>, ch√∫ng ta th·∫•y r·∫±ng ch√∫ng ta ch·ªâ c√≥
hai giao d·ªãch v√† ch√∫ng ta th·∫•y r·∫±ng ADA v·∫´n c√≤n trong t·∫≠p l·ªánh, ƒëi·ªÅu n√†y
cho th·∫•y r·∫±ng v√≠ 2 kh√¥ng l·∫•y ƒë∆∞·ª£c n√≥.</p><p><img src="/assets/images/pic__00034-24c9f7957e25d3fc89ce197500cd9a90.png"></p><p>C√°c s·ªë d∆∞ cu·ªëi c√πng c≈©ng cho th·∫•y ƒëi·ªÅu n√†y.</p><p><img src="/assets/images/pic__00035-921fa0d0ea272d4601e0b224d17ca44c.png"></p><p>V√†, n·∫øu ch√∫ng ta nh√¨n v√†o d·∫•u v·∫øt, ch√∫ng ta s·∫Ω t√¨m ra l·ªói.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.}"><div tabindex="0" class="prism-code language-{.} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">, Slot 2: 00000000-0000-4000-8000-000000000001 {Contract instance for wallet 2}:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      Contract instance stopped with error: &quot;WalletError (ValidationError (ScriptFailure (EvaluationError [\&quot;wrong redeemer\&quot;])))&quot; ]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N·∫øu ch√∫ng ta quay l·∫°i k·ªãch b·∫£n, thay ƒë·ªïi gi√° tr·ªã th√†nh <code>42</code> v√† nh·∫•p
<code>Evaluate</code> l·∫°i, ch√∫ng ta s·∫Ω th·∫•y r·∫±ng x√°c th·ª±c th√†nh c√¥ng.</p><p><img src="/assets/images/pic__00036-53ad6359b95bf3bf4551234df46cfdb9.png"></p><p>B√¢y gi·ªù ch√∫ng ta th·∫•y giao d·ªãch th·ª© ba trong ƒë√≥ v√≠ 2 qu·∫£n l√Ω ƒë·ªÉ thu
ti·ªÅn, tr·ª´ ƒëi ph√≠.</p><p><img src="/assets/images/pic__00037-5c16dde25c9a6d7d6da48a306310e820.png"></p><p>Ch√∫ng t√¥i th·∫•y r·∫±ng s·ªë d∆∞ cu·ªëi c√πng l√† nh∆∞ ch√∫ng t√¥i mong ƒë·ª£i v√† c√°c b·∫£n
ghi c≈©ng cho th·∫•y r·∫±ng vi·ªác x√°c th·ª±c kh√¥ng g√¢y ra l·ªói, ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a
l√† qu√° tr√¨nh x√°c th·ª±c ƒë√£ th√†nh c√¥ng.</p><p>V√¨ v·∫≠y, ƒë√≥ l√† v√≠ d·ª• ƒë·∫ßu ti√™n v·ªÅ tr√¨nh x√°c th·ª±c xem x√©t √≠t nh·∫•t m·ªôt trong
c√°c ƒë·ªëi s·ªë c·ªßa n√≥.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="v√≠-d·ª•-4---typed"></a>V√≠ d·ª• 4 - Typed<a class="hash-link" href="#v√≠-d·ª•-4---typed" title="Direct link to heading">#</a></h3><p>N√≥ ƒë√£ ƒë∆∞·ª£c ƒë·ªÅ c·∫≠p ·ªü ph·∫ßn ƒë·∫ßu c·ªßa b√†i gi·∫£ng, ƒë√¢y l√† Plutus c·∫•p th·∫•p v√†
tr√™n th·ª±c t·∫ø, kh√¥ng ai s·∫Ω vi·∫øt c√°c h√†m x√°c nh·∫≠n nh∆∞ th·∫ø n√†y.</p><p>B√¢y gi·ªù ch√∫ng ta s·∫Ω xem n√≥ th·ª±c s·ª± ƒë∆∞·ª£c th·ª±c hi·ªán nh∆∞ th·∫ø n√†o b·∫±ng c√°ch
s·ª≠ d·ª•ng m·ªôt phi√™n b·∫£n ƒë√£ ƒë√°nh m√°y.</p><p>M·∫∑c d√π ki·ªÉu <code>Data</code>n√†y m·∫°nh m·∫Ω v√† b·∫°n c√≥ th·ªÉ m√£ h√≥a t·∫•t c·∫£ c√°c lo·∫°i d·ªØ
li·ªáu v√†o n√≥, nh∆∞ng n√≥ kh√¥ng th·ª±c s·ª± gi·ªëng Haskell. N√≥ g·∫ßn gi·ªëng nh∆∞ b·∫°n
ƒëang vi·∫øt b·∫±ng m·ªôt ng√¥n ng·ªØ kh√¥ng ƒë·ªãnh ki·ªÉu nh∆∞ Javascript ho·∫∑c Python.
N√≥ gi·ªëng nh∆∞ m·ªôt kh·ªëi d·ªØ li·ªáu, n√≥ c√≥ th·ªÉ ch·ª©a b·∫•t c·ª© th·ª© g√¨ n√™n b·∫°n
kh√¥ng th·ª±c s·ª± c√≥ b·∫•t k·ª≥ lo·∫°i an to√†n n√†o. B·∫°n s·∫Ω lu√¥n c·∫ßn ki·ªÉm tra, v√≠
d·ª•, n·∫øu b·∫°n ƒëang mong ƒë·ª£i m·ªôt s·ªë nguy√™n m√† b·∫°n th·ª±c s·ª± ƒë∆∞·ª£c cung c·∫•p m·ªôt
s·ªë nguy√™n.</p><p>N√≥ ƒë·∫∑c bi·ªát t·ªá v·ªõi ƒë·ªëi s·ªë th·ª© ba, b·ªëi c·∫£nh. M·∫∑c d√π th·∫≠t d·ªÖ d√†ng ƒë·ªÉ t∆∞·ªüng
t∆∞·ª£ng r·∫±ng b·∫±ng c√°ch n√†o ƒë√≥ b·∫°n c√≥ th·ªÉ m√£ h√≥a m·ªôt giao d·ªãch v·ªõi c√°c ƒë·∫ßu
v√†o v√† ƒë·∫ßu ra c·ªßa n√≥ th√†nh ki·ªÉu <code>Data</code>, nh∆∞ng ho√†n to√†n kh√¥ng r√µ r√†ng
ƒëi·ªÅu ƒë√≥ ƒë∆∞·ª£c th·ª±c hi·ªán nh∆∞ th·∫ø n√†o.</p><p>Ch√∫ng t√¥i mu·ªën s·ª≠ d·ª•ng c√°c ki·ªÉu d·ªØ li·ªáu c·ª• th·ªÉ h∆°n ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh cho
ph√π h·ª£p v·ªõi logic nghi·ªáp v·ª•.</p><p>ƒêi·ªÅu n√†y th·ª±c s·ª± c√≥ th·ªÉ th·ª±c hi·ªán ƒë∆∞·ª£c v·ªõi c√°i g·ªçi l√† Typed Validators.
ƒêi·ªÅu n√†y c√≥ nghƒ©a l√† ch√∫ng ta c√≥ th·ªÉ thay th·∫ø c√°c l·∫ßn xu·∫•t hi·ªán <code>Data</code>
trong <code>mkValidator</code> ch·ªØ k√Ω b·∫±ng c√°c ki·ªÉu ph√π h·ª£p h∆°n.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: Data -&gt; Data -&gt; Data -&gt; ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Trong v√≠ d·ª• nh·ªè ng·ªõ ng·∫©n c·ªßa ch√∫ng t√¥i, ch√∫ng t√¥i ho√†n to√†n b·ªè qua
Datum, v√¨ v·∫≠y m·ªôt lo·∫°i ph√π h·ª£p h∆°n s·∫Ω ch·ªâ l√† lo·∫°i Unit - ().</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: () -&gt; Data -&gt; Data -&gt; ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒê·ªëi v·ªõi redeemer, trong v√≠ d·ª• n√†y, ch√∫ng t√¥i ch·ªâ x·ª≠ l√Ω c√°c s·ªë nguy√™n, v√¨
v·∫≠y c√≥ l·∫Ω s·∫Ω h·ª£p l√Ω h∆°n khi s·ª≠ d·ª•ng S·ªë nguy√™n thay th·∫ø..</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: () -&gt; Integer -&gt; Data -&gt; ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒê·ªëi v·ªõi context, c√≥ m·ªôt ki·ªÉu hay h∆°n nhi·ªÅu ƒë∆∞·ª£c g·ªçi l√† <code>ScriptContext</code>
ƒë∆∞·ª£c t·∫°o ra ch√≠nh x√°c cho m·ª•c ƒë√≠ch n√†y.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: () -&gt; Integer -&gt; ScriptContext -&gt; ()</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Cu·ªëi c√πng, ch√∫ng t√¥i ƒë√£ ƒë·ªÅ c·∫≠p r·∫±ng h∆°i b·∫•t th∆∞·ªùng khi s·ª≠ d·ª•ng <code>()</code> l√†m
ki·ªÉu tr·∫£ v·ªÅ. T·ª± nhi√™n h∆°n nhi·ªÅu s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng <code>Bool</code> ƒë·ªÉ ch·ªâ ra x√°c
th·ª±c th√†nh c√¥ng hay th·∫•t b·∫°i.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: () -&gt; Integer -&gt; ScriptContext -&gt; Bool</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>V√¨ v·∫≠y, ƒë√¢y l√† m·ªôt c√°ch t·ªët h∆°n ƒë·ªÉ vi·∫øt m√£ x√°c nh·∫≠n. Hai lo·∫°i cu·ªëi c√πng
<code>SciprtContext</code> v√† <code>Bool</code>, nh∆∞ng hai lo·∫°i ƒë·∫ßu ti√™n c√≥ th·ªÉ kh√°c nhau t√πy
thu·ªôc v√†o t√¨nh hu·ªëng.</p><p>Trong tr∆∞·ªùng h·ª£p n√†y, b√¢y gi·ªù ch√∫ng ta h√£y vi·∫øt l·∫°i h√†m cho ph√π h·ª£p b·∫±ng
c√°ch s·ª≠ d·ª•ng c√°c ki·ªÉu m·ªõi n√†y. Tham s·ªë r b√¢y gi·ªù kh√¥ng c√≤n l√† ki·ªÉu
<code>Data</code> n·ªØa- n√≥ l√† m·ªôt ki·ªÉu <code>Integer</code>, v√¨ v·∫≠y ch√∫ng ta c√≥ th·ªÉ ch·ªâ c·∫ßn
ki·ªÉm tra xem n√≥ b·∫±ng 42 thay v√¨ ki·ªÉm tra n√≥ v·ªõi m·ªôt ki·ªÉu <code>Data</code> ƒë√£ x√¢y
d·ª±ng .</p><p>V√†, khi ch√∫ng ta tr·∫£ v·ªÅ a Bool, ch√∫ng ta c√≥ th·ªÉ bi·∫øn h√†m th√†nh m·ªôt bi·ªÉu
th·ª©c boolean.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# INLINABLE mkValidator #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: () -&gt; Integer -&gt; ScriptContext -&gt; Bool</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ r _ = r == 42</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒêi·ªÅu n√†y s·∫Ω c√≥ c√πng m·ªôt v·∫•n ƒë·ªÅ m√† ch√∫ng t√¥i ƒë√£ g·∫∑p tr∆∞·ªõc ƒë√≥, trong
tr∆∞·ªùng h·ª£p c√≥ l·ªói, ch√∫ng t√¥i s·∫Ω kh√¥ng nh·∫≠n ƒë∆∞·ª£c th√¥ng b√°o l·ªói ƒë·∫πp. C√≥
m·ªôt h√†m Plutus hay ƒë∆∞·ª£c g·ªçi l√† h√†m <code>traceIfFalse</code> n√≥ nh·∫´n <code>String</code> v√†
<code>Bool</code> sau ƒë√≥ tr·∫£ v·ªÅ <code>Bool</code>. N·∫øu ƒë·∫ßu ti√™n <code>Bool</code> l√† <code>True</code>, th√¨ k·∫øt qu·∫£
s·∫Ω l√† <code>True</code> v√† <code>String</code> s·∫Ω b·ªè qua. Tuy nhi√™n n·∫øu ƒë·∫ßu ti√™n <code>Bool</code> l√†
<code>False</code>, th√¨ k·∫øt qu·∫£ l√† <code>False</code> v√† <code>String</code> ƒë∆∞·ª£c ghi l·∫°i.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">PlutusTx.Prelude.traceIfFalse</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      :: PlutusTx.Builtins.String -&gt; Bool -&gt; Bool</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒê√¢y ch√≠nh x√°c l√† nh·ªØng g√¨ ch√∫ng ta c·∫ßn.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{-# INLINABLE mkValidator #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: () -&gt; Integer -&gt; ScriptContext -&gt; Bool</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator _ r _ = traceIfFalse &quot;wrong redeemer&quot; $ r == 42</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒêi·ªÅu n√†y s·∫Ω ch∆∞a ƒë∆∞·ª£c bi√™n d·ªãch v√¨ c√°c ph·∫ßn kh√°c c·ªßa m√£ ch∆∞a ƒë∆∞·ª£c nh·∫≠p
ch√≠nh x√°c. Ch√∫ng t√¥i c·∫ßn ph·∫£i ƒëi·ªÅu ch·ªânh b·∫£ng n·∫•u c·ªßa ch√∫ng t√¥i.</p><p>ƒê·∫ßu ti√™n, ch√∫ng t√¥i gi·ªõi thi·ªáu m·ªôt ki·ªÉu d·ªØ li·ªáu gi·∫£ m·ªõi, ·ªü ƒë√¢y ch√∫ng t√¥i
g·ªçi l√† <code>Typed</code>, ƒë∆°n gi·∫£n d·ª±a tr√™n t√™n c·ªßa t·∫≠p l·ªánh. ƒê·ªëi v·ªõi lo·∫°i n√†y,
ch√∫ng t√¥i ph·∫£i cung c·∫•p m·ªôt phi√™n b·∫£n c·ªßa <code>Scripts.ValidatorTypes</code>.</p><p>M·ª•c ƒë√≠ch c·ªßa tr∆∞·ªùng h·ª£p n√†y l√† khai b√°o c√°c lo·∫°i cho datum v√† redeemer.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">data Typed</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Scripts.ValidatorTypes Typed where</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    type instance DatumType Typed = ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    type instance RedeemerType Typed = Integer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒê√¢y l√† Haskell kh√° n√¢ng cao, ƒë∆∞·ª£c g·ªçi l√† l·∫≠p tr√¨nh m·ª©c ki·ªÉu, nh∆∞ng c≈©ng
gi·ªëng nh∆∞ Template Haskell m√† ch√∫ng ta ƒë√£ g·∫∑p, b·∫°n kh√¥ng th·ª±c s·ª± c·∫ßn
hi·ªÉu s√¢u v·ªÅ n√≥ v√¨ t·∫•t c·∫£ c√°c script s·∫Ω tu√¢n theo c√πng m·ªôt khu√¥n m·∫´u.</p><p>B√¢y gi·ªù ch√∫ng ta c·∫ßn bi√™n d·ªãch tr√¨nh x√°c nh·∫≠n. N∆°i tr∆∞·ªõc ƒë√¢y ch√∫ng ta ƒë√£
s·ª≠ d·ª•ng <code>mkValidatorScript</code>,, b√¢y gi·ªù ch√∫ng ta s·ª≠ d·ª•ng m·ªôt c√°i g√¨ ƒë√≥
ƒë∆∞·ª£c g·ªçi l√† <code>mkTypedValidator</code>, l·∫•y ki·ªÉu d·ªØ li·ªáu m·ªõi c·ªßa ch√∫ng ta l√†m
tham s·ªë v√† t·∫°o ra m·ªôt c√°i g√¨ ƒë√≥ c√≥ ki·ªÉu <code>TypedValidator</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">typedValidator :: Scripts.TypedValidator Typed</span></div><div class="token-line" style="color:#393A34"><span class="token plain">typedValidator = Scripts.mkTypedValidator @Typed</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    $$(PlutusTx.compile [|| mkValidator ||])</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    $$(PlutusTx.compile [|| wrap ||])</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  where</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    wrap = Scripts.wrapValidator @() @Integer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒêi·ªÅu n√†y t∆∞∆°ng t·ª± v·ªõi m√£ <code>mkValidator</code>, nh∆∞ng lo·∫°i n√†y ch√∫ng t√¥i c≈©ng
bi√™n d·ªãch m·ªôt h√†m <code>wrapValidator</code> nh·∫≠n ki·ªÉu d·ªØ li·ªáu v√† redeemer.</p><p>ƒê·ªÉ ƒëi·ªÅu n√†y ho·∫°t ƒë·ªông, tr∆∞·ªõc ti√™n, ch√∫ng ta c·∫ßn th√™m m·ªôt import.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">import qualified Ledger.Typed.Scripts as Scripts</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Trong v√≠ d·ª• n√†y, n√≥ ƒëang ƒë∆∞·ª£c nh·∫≠p ƒë·ªß ƒëi·ªÅu ki·ªán v√† s·ª≠ d·ª•ng ti·ªÅn t·ªë
<code>Scripts</code> , nh∆∞ng ƒëi·ªÅu n√†y l√† t√πy √Ω v√† b·∫°n c√≥ th·ªÉ ch·ªçn m·ªôt s·ªë c√°ch kh√°c
ƒë·ªÉ tham chi·∫øu ƒë·∫øn m√¥-ƒëun.</p><p>Ch√∫ng t√¥i th·ª±c hi·ªán nh·ªØng thay ƒë·ªïi n√†y, m√£ Haskell s·∫Ω ƒë∆∞·ª£c bi√™n d·ªãch v√†
b√¢y gi·ªù ch√∫ng t√¥i c·∫ßn thay ƒë·ªïi b·∫£n so·∫°n th·∫£o Haskell M·∫´u t·∫°o ra h√†m
<code>validator</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">validator :: Validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">validator = Scripts.validatorScript typedValidator</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>·ªû ƒë√¢y ch√∫ng t√¥i ƒë√£ s·ª≠ d·ª•ng h√†m <code>validatorScript</code> ƒë·ªÉ t·∫°o tr√¨nh x√°c th·ª±c
kh√¥ng ƒë·ªãnh ki·ªÉu t·ª´ phi√™n b·∫£n ƒë√£ nh·∫≠p c·ªßa ch√∫ng t√¥i.</p><p>T·∫•t nhi√™n, ƒë·ªÉ c√≥ ƒë∆∞·ª£c h√†m bƒÉm, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng tr√¨nh x√°c th·ª±c m√†
ch√∫ng ta c√≥ v√† bi·∫øn n√≥ th√†nh m·ªôt tr√¨nh x√°c th·ª±c nh∆∞ <code>ValidatorHash</code>
ch√∫ng ta ƒë√£ l√†m tr∆∞·ªõc ƒë√¢y, nh∆∞ng c√≥ m·ªôt c√°ch tr·ª±c ti·∫øp h∆°n, tr√¥ng gi·ªëng
h·ªát nhau, nh∆∞ng trong tr∆∞·ªùng h·ª£p <code>Scripts</code>n√†y l√† ƒë·∫øn t·ª´ m√¥-ƒëun
<code>Ledger.Typed.Scripts</code> h∆°n l√† <code>Ledger.Scripts</code>. Phi√™n b·∫£n n√†y l·∫•y tr·ª±c
ti·∫øp tr√¨nh x√°c th·ª±c ƒë√£ nh·∫≠p.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">valHash :: Ledger.ValidatorHash</span></div><div class="token-line" style="color:#393A34"><span class="token plain">valHash = Scripts.validatorHash typedValidator</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒê·ªãa ch·ªâ t·∫≠p l·ªánh ƒë∆∞·ª£c t√≠nh nh∆∞ tr∆∞·ªõc ƒë√¢y.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">scrAddress :: Ledger.Address</span></div><div class="token-line" style="color:#393A34"><span class="token plain">scrAddress = scriptAddress validator</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Trong v√≠ d·ª• c·ª±c k·ª≥ ƒë∆°n gi·∫£n n√†y, n√≥ c√≥ v·∫ª kh√¥ng ƒë√°ng ƒë·ªÉ n·ªó l·ª±c, nh∆∞ng
ƒë·ªëi v·ªõi c√°c h·ª£p ƒë·ªìng th·ª±c t·∫ø, l√†m nh∆∞ th·∫ø n√†y s·∫Ω t·ªët h∆°n nhi·ªÅu.</p><p>M√£ off-chain g·∫ßn nh∆∞ gi·ªëng h·ªát nhau.</p><p>C√≥ m·ªôt thay ƒë·ªïi nh·ªè ƒë·ªëi v·ªõi giveƒëi·ªÉm cu·ªëi. M·∫∑c d√π ch√∫ng t√¥i v·∫´n ch∆∞a xem
x√©t chi ti·∫øt ph·∫ßn n√†y c·ªßa m√£, nh∆∞ng c√≥ th·ªÉ th·ª±c hi·ªán c√°c thay ƒë·ªïi sau.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">let tx = mustPayToTheScript () $ ADA.lovelaceValueOf amount</span></div><div class="token-line" style="color:#393A34"><span class="token plain">ledgerTx &lt;- submitTxConstraints inst tx</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>H√†m <code>mustPayToOtherScript</code> ƒë√£ ƒë∆∞·ª£c thay th·∫ø b·∫±ng <code>mustPayToTheScript</code>.
ƒê√¢y l√† m·ªôt script ti·ªán l·ª£i cho ph√©p ch√∫ng ta truy·ªÅn ch·ªâ v√†o () v√¨ ch√∫ng
ta c√≤n c·∫ßn ph·∫£i x√¢y d·ª±ng m·ªôt gi√° tr·ªã c·ªßa ki·ªÉu Data. Ch√∫ng ta c≈©ng kh√¥ng
c·∫ßn chuy·ªÉn m√£ bƒÉm t·∫≠p l·ªánh n·ªØa.</p><p>H√†nh vi c·ªßa m√£ n√†y s·∫Ω gi·ªëng v·ªõi h√†nh vi trong v√≠ d·ª• tr∆∞·ªõc, v√¨ v·∫≠y ch√∫ng
t√¥i s·∫Ω kh√¥ng xem qua n√≥ trong s√¢n ch∆°i.</p><p>B√¢y gi·ªù ch√∫ng t√¥i s·∫Ω gi·∫£i th√≠ch c√°ch ho·∫°t ƒë·ªông th·ª±c s·ª± c·ªßa n√≥. L√†m c√°ch
n√†o ƒë·ªÉ Plutus chuy·ªÉn ƒë·ªïi c√°c ki·ªÉu d·ªØ li·ªáu t√πy ch·ªânh n√†y th√†nh ki·ªÉu tri·ªÉn
khai c·∫•p th·∫•p th·ª±c t·∫ø - Dataki·ªÉu.</p><p>Ch√∫ng ta c√≥ th·ªÉ xem m√£ trong m√¥-ƒëun PlutusTx.IsData.Class .</p><p>·ªû ƒë√¢y ch√∫ng ta th·∫•y r·∫±ng c√≥ m·ªôt l·ªõp ki·ªÉu kh√° ƒë∆°n gi·∫£n ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a
ƒë∆∞·ª£c g·ªçi l√† <code>IsData</code>.</p><p><img src="/assets/images/pic__00037-5c16dde25c9a6d7d6da48a306310e820.png"></p><p>L·ªõp n√†y cung c·∫•p hai ch·ª©c nƒÉng</p><ul><li><code>toData</code> nh·∫≠n m·ªôt gi√° tr·ªã v√† chuy·ªÉn ƒë·ªïi n√≥ th√†nh <code>Data</code></li><li><code>fromData</code> nh·∫≠n m·ªôt gi√° tr·ªã c·ªßa ki·ªÉu <code>Data</code> c·ªë g·∫Øng chuy·ªÉn ƒë·ªïi n√≥
th√†nh m·ªôt th·ªÉ hi·ªán c·ªßa ki·ªÉu <code>IsData</code>. ƒêi·ªÅu n√†y c√≥ th·ªÉ kh√¥ng th√†nh
c√¥ng v√¨ kh√¥ng ph·∫£i t·∫•t c·∫£ c√°c gi√° tr·ªã c·ªßa ki·ªÉu <code>Data</code> s·∫Ω ƒë∆∞·ª£c chuy·ªÉn
ƒë·ªïi th√†nh ki·ªÉu ƒë√≠ch..</li></ul><p>H√£y th·ª≠ ƒëi·ªÅu n√†y trong REPL.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude Week02.Typed&gt; import PlutusTx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx Week02.Typed&gt; import PlutusTx.IsData.Class</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx PlutusTx.IsData.Class Week02.Typed&gt; :i IsData</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng t√¥i bi·∫øt ƒëi·ªÅu ƒë√≥ <code>()</code> and <code>Integer</code> c·∫£ hai ƒë·ªÅu l√† tr∆∞·ªùng h·ª£p c·ªßa
<code>IsData</code> v√¨ ch√∫ng ƒë√£ ho·∫°t ƒë·ªông trong v√≠ d·ª• c·ªßa ch√∫ng t√¥i.</p><p>H√£y chuy·ªÉn ƒë·ªïi <code>Integer</code> th√†nh <code>Data</code></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx PlutusTx.IsData.Class Week02.Typed&gt; toData (42 :: Integer)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">I 42</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng t√¥i th·∫•y r·∫±ng ƒëi·ªÅu n√†y ƒë√£ ƒë∆∞·ª£c chuy·ªÉn ƒë·ªïi th√†nh m·ªôt phi√™n b·∫£n c·ªßa
ki·ªÉu Data b·∫±ng c√°ch s·ª≠ d·ª•ng h√†m t·∫°o I , m√† ch√∫ng t√¥i ƒë√£ th·ª±c hi·ªán theo
c√°ch th·ªß c√¥ng tr∆∞·ªõc khi ch√∫ng t√¥i s·ª≠ d·ª•ng x√°c th·ª±c.</p><p>B√¢y gi·ªù h√£y l√†m theo c√°ch kh√°c</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx PlutusTx.IsData.Class Week02.Typed&gt; fromData (I 42) :: Maybe Integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Just 42</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Ch√∫ng t√¥i nh·∫≠n ƒë∆∞·ª£c m·ªôt <code>Just 42</code> back - <code>Just</code> l√† <code>Maybe</code> t·∫°o khi
<code>Maybe</code> l√† <code>Nothing</code>.</p><p>V√† khi n√≥ kh√¥ng th√†nh c√¥ng, khi n√≥ kh√¥ng th·ªÉ chuy·ªÉn ƒë·ªïi sang lo·∫°i ƒë√≠ch,
ch√∫ng ta s·∫Ω l·∫•y l·∫°i <code>Nothing</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx PlutusTx.IsData.Class Week02.Typed&gt; fromData (List []) :: Maybe Integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Nothing</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N·∫øu ch√∫ng ta ki·ªÉm tra<code>IsData</code>. Ch√∫ng ta c√≥ th·ªÉ th·∫•y t·∫•t c·∫£ c√°c ki·ªÉu m√†
m·∫´u n√†y s·∫Ω ho·∫°t ƒë·ªông cho t·∫•t c·∫£ c√°c ki·ªÉu l√† <code>IsData</code> ƒë∆∞·ª£c x√°c ƒë·ªãnh.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx PlutusTx.IsData.Class Week02.Typed&gt; :i IsData</span></div><div class="token-line" style="color:#393A34"><span class="token plain">type IsData :: * -&gt; Constraint</span></div><div class="token-line" style="color:#393A34"><span class="token plain">class IsData a where</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  toData :: a -&gt; Data</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  fromData :: Data -&gt; Maybe a</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  {-# MINIMAL toData, fromData #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        -- Defined in ‚ÄòPlutusTx.IsData.Class‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance IsData a =&gt; IsData (Maybe a)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-tx-0.1.0.0:PlutusTx.IsData.Instances‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance (IsData a, IsData b) =&gt; IsData (Either a b)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-tx-0.1.0.0:PlutusTx.IsData.Instances‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance IsData Bool</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-tx-0.1.0.0:PlutusTx.IsData.Instances‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance (IsData a, IsData b, IsData c, IsData d) =&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">         IsData (a, b, c, d)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-tx-0.1.0.0:PlutusTx.IsData.Instances‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance (IsData a, IsData b, IsData c) =&gt; IsData (a, b, c)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-tx-0.1.0.0:PlutusTx.IsData.Instances‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance (IsData a, IsData b) =&gt; IsData (a, b)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-tx-0.1.0.0:PlutusTx.IsData.Instances‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance IsData ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚Äòplutus-tx-0.1.0.0:PlutusTx.IsData.Instances‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance IsData a =&gt; IsData [a]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚ÄòPlutusTx.IsData.Class‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance IsData Integer -- Defined in ‚ÄòPlutusTx.IsData.Class‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance (TypeError ...) =&gt; IsData Int</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  -- Defined in ‚ÄòPlutusTx.IsData.Class‚Äô</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance IsData Data -- Defined in ‚ÄòPlutusTx.IsData.Class‚Äô</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>ƒê√¢y v·∫´n l√† m·ªôt danh s√°ch kh√° ng·∫Øn v·ªÅ c√°c lo·∫°i c√≥ th·ªÉ. Ch√∫ng t√¥i mu·ªën s·ª≠
d·ª•ng nhi·ªÅu lo·∫°i h∆°n th·∫ø n√†y cho d·ªØ li·ªáu v√† c√¥ng c·ª• ƒë·ªïi qu√† c·ªßa ch√∫ng
t√¥i.</p><p>ƒê·ªÉ l√†m ƒë∆∞·ª£c ƒëi·ªÅu n√†y, th√¥ng th∆∞·ªùng ch√∫ng ta c·∫ßn x√°c ƒë·ªãnh m·ªôt IsDatath·ªÉ
hi·ªán cho b·∫•t k·ª≥ ki·ªÉu n√†o m√† ch√∫ng ta mu·ªën s·ª≠ d·ª•ng. ƒêi·ªÅu n√†y s·∫Ω cho ph√©p
ch√∫ng t√¥i cho tr√¨nh bi√™n d·ªãch bi·∫øt c√°ch th·ª±c hi·ªán chuy·ªÉn ƒë·ªïi qua l·∫°i.
Tuy nhi√™n, ƒëi·ªÅu n√†y m·ªôt l·∫ßn n·ªØa s·∫Ω r·∫•t t·∫ª nh·∫°t v√¨ n√≥ l√† m·ªôt qu√° tr√¨nh
m√°y m√≥c. V√¨ v·∫≠y, c√≥ m·ªôt c∆° ch·∫ø trong Plutus th·ª±c hi·ªán ƒëi·ªÅu n√†y cho ch√∫ng
ta.</p><p>V√≠ d·ª• 5 - C√°c ki·ªÉu IsData t√πy ch·ªânh
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</p><p>B√¢y gi·ªù ch√∫ng ta h√£y n√≥i v·ªÅ c√°c ki·ªÉu d·ªØ li·ªáu t√πy ch·ªânh. H√£y x√°c ƒë·ªãnh m·ªôt
c√°i ng·ªõ ng·∫©n v√† s·ª≠ d·ª•ng n√≥ trong h√†m x√°c nh·∫≠n c·ªßa ch√∫ng t√¥i.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">newtype MySillyRedeemer = MySillyRedeemer Integer</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">PlutusTx.unstableMakeIsData &#x27;&#x27;MySillyRedeemer</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">{-# INLINABLE mkValidator #-}</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator :: () -&gt; MySillyRedeemer -&gt; ScriptContext -&gt; Bool</span></div><div class="token-line" style="color:#393A34"><span class="token plain">mkValidator () (MySillyRedeemer r) _ = traceIfFalse &quot;wrong redeemer&quot; $ r == 42</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>::: {.note}
::: {.title}
Note
:::</p><p>Ngo√†i ra c√≤n c√≥ m·ªôt phi√™n b·∫£n ·ªïn ƒë·ªãnh c·ªßa h√†m
PlutusTx.unstableMakeIsData v√† phi√™n b·∫£n ·ªïn ƒë·ªãnh ph·∫£i lu√¥n ƒë∆∞·ª£c s·ª≠ d·ª•ng
trong m√£ s·∫£n xu·∫•t. S·ª± kh√°c bi·ªát gi·ªØa c·∫£ hai l√†, trong tr∆∞·ªùng h·ª£p y√™u c·∫ßu
Data nhi·ªÅu h∆°n m·ªôt h√†m t·∫°o, phi√™n b·∫£n kh√¥ng ·ªïn ƒë·ªãnh s·∫Ω kh√¥ng ƒë·∫£m b·∫£o,
gi·ªØa c√°c phi√™n b·∫£n Plutus, th·ª© t·ª± c·ªßa c√°c h√†m t·∫°o s·∫Ω ƒë∆∞·ª£c gi·ªØ nguy√™n.
:::</p><p>V√† ch√∫ng ta c·∫ßn thay ƒë·ªïi m·ªôt s·ªë t·∫•m boilerplate.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">data Typed</span></div><div class="token-line" style="color:#393A34"><span class="token plain">instance Scripts.ValidatorTypes Typed where</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   type instance RedeemerType Typed = MySillyRedeemer</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">typedValidator :: Scripts.TypedValidator Typed</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">where</span></div><div class="token-line" style="color:#393A34"><span class="token plain">   wrap = Scripts.wrapValidator @() @MySillyRedeemer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>We also need to change some off-chain code in the <code>grab</code> endpoint.</p><p>Instead of using <code>I r</code>, we will use <code>toData (MySillyRedeemer r)</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">grab :: forall w s e. AsContractError e =&gt; Integer -&gt; Contract w s e ()</span></div><div class="token-line" style="color:#393A34"><span class="token plain">grab r = do</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    utxos &lt;- utxoAt scrAddress</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    let orefs   = fst &lt;$&gt; Map.toList utxos</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        lookups = Constraints.unspentOutputs utxos      &lt;&gt;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  Constraints.otherScript validator</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        tx :: TxConstraints Void Void</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        tx      = mconcat [mustSpendScriptOutput oref $ Redeemer $ PlutusTx.toData (MySillyRedeemer r) | oref &lt;- orefs]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    ledgerTx &lt;- submitTxConstraintsWith @Void lookups tx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    void $ awaitTxConfirmed $ txId ledgerTx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    logInfo @String $ &quot;collected gifts&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N·∫øu ch√∫ng ta c·ªë g·∫Øng bi√™n d·ªãch m√£ ngay b√¢y gi·ªù, tr√™n d√≤ng l·ªánh ho·∫∑c
trong s√¢n ch∆°i, ch√∫ng ta s·∫Ω g·∫∑p l·ªói v√¨ Plutus kh√¥ng bi·∫øt c√°ch chuy·ªÉn ƒë·ªïi
qua l·∫°i gi·ªØa <code>IsData</code> and <code>MySillyRedeemer</code>.</p><p>Ch√∫ng t√¥i c√≥ th·ªÉ vi·∫øt m·ªôt v√≠ d·ª• c·ªßa IsData cho MySillyRedeemer b·∫±ng tay.
Nh∆∞ng, ch√∫ng ta kh√¥ng c·∫ßn ph·∫£i l√†m v·∫≠y.</p><p>Thay v√†o ƒë√≥, ch√∫ng ta c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt ch√∫t ph√©p thu·∫≠t c·ªßa Template
Haskell.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">PlutusTx.unstableMakeIsData &#x27;&#x27;MySillyRedeemer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>T·∫°i th·ªùi ƒëi·ªÉm bi√™n d·ªãch, tr√¨nh bi√™n d·ªãch s·∫Ω s·ª≠ d·ª•ng Template Haskell ƒë·ªÉ
vi·∫øt m·ªôt IsDatath·ªÉ hi·ªán cho ch√∫ng ta. V√† b√¢y gi·ªù, n√≥ s·∫Ω bi√™n d·ªãch.</p><p>H√£y ki·ªÉm tra n√≥ trong REPL.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI {.haskell}"><div tabindex="0" class="prism-code language-{.haskell} codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx PlutusTx.IsData.Class&gt; :l src/Week02/IsData.hs</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Ok, one module loaded.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Prelude PlutusTx PlutusTx.IsData.Class Week02.IsData&gt; toData (MySillyRedeemer 42)</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Constr 0 [I 42]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>N·∫øu b·∫°n th·ª≠ m√£ n√†y IsData.hs, trong s√¢n ch∆°i, b·∫°n s·∫Ω th·∫•y r·∫±ng n√≥ ho·∫°t
ƒë·ªông theo c√°ch gi·ªëng nh∆∞ tr∆∞·ªõc ƒë√¢y.</p><p>T√≥m l∆∞·ª£c -------</p><p>Ch√∫ng t√¥i ƒë√£ th·∫•y m·ªôt v√†i v√≠ d·ª• v·ªÅ tr√¨nh x√°c nh·∫≠n ƒë∆°n gi·∫£n.</p><p>Ch√∫ng t√¥i ƒë√£ b·∫Øt ƒë·∫ßu v·ªõi m·ªôt tr√¨nh x√°c th·ª±c s·∫Ω lu√¥n th√†nh c√¥ng, ho√†n
to√†n b·ªè qua c√°c l·∫≠p lu·∫≠n c·ªßa n√≥. Sau ƒë√≥, ch√∫ng t√¥i xem x√©t m·ªôt tr√¨nh x√°c
th·ª±c lu√¥n kh√¥ng th√†nh c√¥ng, m·ªôt l·∫ßn n·ªØa ho√†n to√†n b·ªè qua c√°c ƒë·ªëi s·ªë c·ªßa
n√≥. Sau ƒë√≥, ch√∫ng t√¥i xem x√©t m·ªôt c√¥ng c·ª• ki·ªÉm tra ng∆∞·ªùi mua l·∫°i c·ªßa n√≥
ƒë·ªÉ ki·ªÉm tra m·ªôt gi√° tr·ªã ƒë∆∞·ª£c x√°c ƒë·ªãnh tr∆∞·ªõc nh·∫•t ƒë·ªãnh.</p><p>Sau ƒë√≥, ch√∫ng t√¥i ƒë√£ bi·∫øn tr√¨nh x√°c th·ª±c n√†y th√†nh m·ªôt phi√™n b·∫£n ƒë√£
nh·∫≠p, phi√™n b·∫£n n√†y s·∫Ω ƒë∆∞·ª£c s·ª≠ d·ª•ng trong th·ª±c t·∫ø. ƒê·∫ßu ti√™n, ch√∫ng t√¥i
s·ª≠ d·ª•ng c√°c ki·ªÉu d·ªØ li·ªáu t√≠ch h·ª£p v√† sau ƒë√≥ ch√∫ng t√¥i xem c√°ch ch√∫ng t√¥i
c√≥ th·ªÉ s·ª≠ d·ª•ng c√°c ki·ªÉu d·ªØ li·ªáu t√πy ch·ªânh.</p><p>Ch√∫ng t√¥i v·∫´n ch∆∞a xem x√©t c√°c v√≠ d·ª• trong ƒë√≥ d·ªØ li·ªáu ho·∫∑c b·ªëi c·∫£nh ƒë∆∞·ª£c
ki·ªÉm tra, ƒëi·ªÅu n√†y s·∫Ω ƒë∆∞·ª£c y√™u c·∫ßu ƒë·ªÉ c√≥ c√°c v√≠ d·ª• th·ª±c t·∫ø h∆°n.</p><p>Ch√∫ng ta s·∫Ω xem x√©t ƒëi·ªÅu ƒë√≥ trong b√†i gi·∫£ng ti·∫øp theo.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/cardano2vn/cardanovn-portal/edit/main/docs/dr-lars-lession/week2.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/dr-lars-lession/week1"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Week 01 - English Auction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/dr-lars-lession/week3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Week 03 - Script Context ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#tr∆∞·ªõc-khi-b·∫Øt-ƒë·∫ßu" class="table-of-contents__link">Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu</a></li><li><a href="#gi·ªõi-thi·ªáu" class="table-of-contents__link">Gi·ªõi thi·ªáu</a></li><li><a href="#plutustxdata" class="table-of-contents__link">PlutusTx.Data</a></li><li><a href="#plutus-validator" class="table-of-contents__link">Plutus Validator</a><ul><li><a href="#v√≠-d·ª•-1---h·ª£p-ƒë·ªìng-gift" class="table-of-contents__link">V√≠ d·ª• 1 - H·ª£p ƒë·ªìng Gift</a></li><li><a href="#v√≠-d·ª•-2---burn" class="table-of-contents__link">V√≠ d·ª• 2 - Burn</a></li><li><a href="#v√≠-d·ª•-4---typed" class="table-of-contents__link">V√≠ d·ª• 4 - Typed</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">T√†i li·ªáu</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/overview">B·∫Øt ƒë·∫ßu</a></li></ul></div><div class="col footer__col"><div class="footer__title">C·ªông ƒë·ªìng</div><ul class="footer__items"><li class="footer__item"><a href="https://t.me/cardano2vn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCJTdAQPGJntJet5v-nk9ebA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li><li class="footer__item"><a href="https://github.com/cardano2vn" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/about-us">About Us</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 cardano2vn.io,. Break the blocks</div></div></div></footer></div>
<script src="/assets/js/runtime~main.00983322.js"></script>
<script src="/assets/js/main.349a1baa.js"></script>
</body>
</html>